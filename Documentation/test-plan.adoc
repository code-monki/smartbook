= Smartbook Project Test Plan - FINAL REVISED
:author: Gemini AI Assistant
:revdate: 2025-12-14
:doctype: article
:toc: left
:toclevels: 3
:sectnums:

== Introduction

This Test Plan defines the scope, approach, and specific test cases required to validate the core security, persistence, and architectural requirements for Phase 1, derived directly from the SRS and DDD Acceptance Criteria (AC).

== Test Scope and Environment

[cite_start]The scope covers all functional and non-functional requirements (FR/NFR) related to security, persistence, UI behavior, and multi-window isolation[cite: 2]. [cite_start]Testing shall be performed on the compiled C++ application[cite: 3].

== Test Cases: Security and Trust Validation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SEC-01** | FR-2.3.1 (L1 Commercial Trust) a|
. Import a CA-Signed (L1) cartridge.
. Open the Reader View.
. [cite_start]Call `SmartbookBridge.requestAppConsent()` from the embedded JS[cite: 5, 6]. | **AC:** The call returns `TRUE` immediately. [cite_start]No native modal dialog is displayed[cite: 6].
| **T-SEC-02** | FR-2.3.2/2.3.3 (Initial Consent) a|
. Import an L2 or L3 cartridge.
. Open the Reader View.
. [cite_start]Call `SmartbookBridge.requestAppConsent()`[cite: 7, 8]. | [cite_start]**AC:** The native security dialog (DDD 11.2.1) is displayed, clearly showing the App Name and the three consent options[cite: 8].
| **T-SEC-03** | FR-2.4.1 (Persistent Trust) a|
. Execute T-SEC-02.
. [cite_start]Select **"Always trust this cartridge"** in the dialog[cite: 9].
. Close and immediately re-open the cartridge. 4. [cite_start]Call `requestAppConsent()`[cite: 10]. | [cite_start]**AC:** A `PERSISTENT` record is written to `Local_Trust_Registry`[cite: 10]. [cite_start]The second load skips the dialog, and the consent call returns `TRUE`[cite: 11].
| **T-SEC-04** | FR-2.4.4, NFR-3.3 (Tampering Detection) a|
. Complete T-SEC-03.
. [cite_start]**Manually alter the cartridge file data** (e.g., change one byte in the Content tables)[cite: 12].
. [cite_start]Attempt to load the cartridge[cite: 13]. | **AC:** The `SignatureVerifier` blocks the load. [cite_start]An "Rejected (Tampered)" error is displayed[cite: 13]. [cite_start]Content is **not rendered** and the `requestAppConsent()` returns `FALSE`[cite: 14].
| **T-SEC-05** | FR-2.4.3 (Trust Revocation) a|
. [cite_start]Verify persistent trust exists (T-SEC-03)[cite: 15].
. Use the Library Manager UI control to revoke trust.
. [cite_start]Close and re-open the cartridge[cite: 16]. | [cite_start]**AC:** The `Local_Trust_Registry` record is set to `app_trust_policy: REVOKED`[cite: 16]. [cite_start]The next load forces the user to re-consent (T-SEC-02)[cite: 17].
|===

== Test Cases: Architectural and Persistence Validation

[cols="1, 2, a, 3"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PERS-01** | FR-2.5.1 (Manifest Creation) a|
. Import a new cartridge file.
. [cite_start]Examine the `Local_Library_Manifest` table[cite: 19]. | [cite_start]**AC:** A new entry exists containing the correct `cartridge_guid`, `cartridge_hash` (H2), `local_path`, and the required `publication_year`[cite: 20].
| **T-PERS-02** | FR-2.1.1 (Multi-Window Isolation) a|
. [cite_start]Open Cartridge A and Cartridge B simultaneously in separate windows[cite: 21].
. [cite_start]Save data to Form X in A.
. Immediately save different data to Form X in B[cite: 22]. | **AC:** Both windows remain responsive. [cite_start]Data saved in B is isolated to B's `User_Data` table, confirming the per-instance nature of `CartridgeDBConnector`[cite: 23, 24].
| **T-PERS-03** | FR-2.5.5 (Atomic Deletion) a|
. [cite_start]Delete a cartridge via the List-View context menu[cite: 24].
. [cite_start]Check the file system and local databases[cite: 25]. | [cite_start]**AC:** The cartridge file is deleted[cite: 25]. [cite_start]The corresponding rows are removed atomically from **both** `Local_Library_Manifest` and `Local_Trust_Registry`[cite: 26].
| **T-UI-01** | NFR-3.1 (Library Performance) a|
. [cite_start]Open the Library Manager containing 100 cartridges[cite: 27].
. [cite_start]Measure the time until all metadata is displayed[cite: 27]. | [cite_start]**AC:** The Library View loads and displays all required metadata fields (Title, Author, Year, etc.) within **500 milliseconds**[cite: 28].
| **T-UI-02** | DDD 11.1 (UI Dual View) a|
. [cite_start]Open the Library Manager[cite: 29].
. [cite_start]Toggle between the Bookshelf and List-View repeatedly[cite: 30]. | [cite_start]**AC:** Both views load instantly[cite: 30]. [cite_start]The List-View displays the required columns (Title, Author, Edition/Version, Year of Publication) sourced from the manifest[cite: 31].
|===

== Test Cases: Creator Tool Functional Validation

=== Content Authoring and Editing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-01** | FR-CT-3.1 (HTML Content Authoring) | 
. Create a new cartridge in Creator Tool.
. Open the WYSIWYG editing interface
. Enter text content in the editor.
. Save the cartridge.
| **AC:** Content is stored in the `Content_Pages` table as HTML. The WYSIWYG interface displays and allows editing of HTML content using Qt WebEngineView.

| **T-CT-02** | FR-CT-3.2 (Rich Text Editing) | 
. Open a cartridge in Creator Tool.
. Select text in the editor.
. Apply bold formatting using the toolbar.
. Apply italic formatting.
. Create a bulleted list.
. Add a hyperlink.
| **AC:** All formatting operations complete successfully. Formatted text displays correctly in the editor. HTML markup is correctly generated and stored.

| **T-CT-03** | FR-CT-3.3 (Direct HTML Editing) | 
. Open a cartridge in Creator Tool.
. Switch to HTML editing mode (or insert raw HTML).
. Insert HTML code: `<div class="custom">Custom Content</div>`.
. Switch back to WYSIWYG view.
| **AC:** Raw HTML is accepted and stored. HTML displays correctly in WYSIWYG view. Custom HTML elements are preserved.

| **T-CT-04** | FR-CT-3.4 (Standard Edit Operations) | 
. Open a cartridge in Creator Tool.
. Enter text in the editor.
. Select text and use Ctrl+X/Cmd+X to cut.
. Use Ctrl+V/Cmd+V to paste.
. Use Ctrl+Z/Cmd+Z to undo.
. Use Ctrl+Y/Cmd+Y or Ctrl+Shift+Z/Cmd+Shift+Z to redo.
. Use Ctrl+A/Cmd+A to select all.
| **AC:** All keyboard shortcuts function correctly. Cut, copy, paste, undo, redo, and select all operations work as expected. Operations are accessible via standard keyboard shortcuts.

| **T-CT-05** | FR-CT-3.5 (Preview Functionality) | 
. Open a cartridge in Creator Tool.
. Edit content in the editor.
. Open preview pane (or trigger manual refresh).
| **AC:** Preview displays content as it will appear in the Reader. Preview updates correctly (either live or via manual refresh, per design decision). Preview matches Reader rendering.

|===

=== Page Management

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-06** | FR-CT-3.6 (Page Selection) | 
. Open a cartridge with multiple pages.
. Use the page selection mechanism (sidebar, dropdown, etc.) to select a different page.
| **AC:** Selected page loads in the editor. Page selection mechanism functions correctly. Editor displays the correct page content.

| **T-CT-07** | FR-CT-3.7 (Page CRUD Operations) | 
. Open a cartridge in Creator Tool.
. Create a new page using the Create function.
. Edit the page content.
. Delete a page using the Delete function.
. Verify page still exists after save.
| **AC:** New page is created and added to `Content_Pages` table. Page can be edited and saved. Deleted page is removed from `Content_Pages` table. All CRUD operations complete successfully.

| **T-CT-08** | FR-CT-3.8 (Page Ordering) | 
. Open a cartridge with multiple pages.
. Reorder pages using drag-and-drop or up/down buttons.
. Save the cartridge.
| **AC:** `page_order` field in `Content_Pages` table is updated correctly. Pages display in the new order. Order persists after save and reload.

| **T-CT-09** | FR-CT-3.9 (Chapter Organization) | 
. Open a cartridge in Creator Tool.
. Assign a chapter title to a page.
. Organize multiple pages into a chapter.
. Save the cartridge.
| **AC:** `chapter_title` field in `Content_Pages` table is updated. Chapter organization is preserved. Chapter titles display correctly in the UI.

|===

=== Cartridge Creation and Export

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-10** | FR-CT-3.27 (New Cartridge Creation) | 
. Launch Creator Tool.
. Create a new empty cartridge.
. Verify database structure.
| **AC:** New SQLite database file is created. All required table schemas are initialized. Cartridge is ready for content authoring.

| **T-CT-11** | FR-CT-3.22 (GUID Generation) | 
. Create a new cartridge.
. Check the `Metadata` table.
| **AC:** A UUID Version 4 `cartridge_guid` is automatically generated. GUID is stored in `Metadata` table. GUID is immutable (cannot be changed after creation).

| **T-CT-12** | FR-CT-3.28 (Cartridge Opening) | 
. Create and save a cartridge with content.
. Close Creator Tool.
. Reopen Creator Tool.
. Open the saved cartridge file.
| **AC:** Cartridge opens successfully. All content, metadata, and resources load into the editing interface. Editor displays all pages and content correctly.

| **T-CT-13** | FR-CT-3.29 (Cartridge Saving) | 
. Open a cartridge in Creator Tool.
. Make changes to content.
. Save the cartridge.
. Close and reopen the cartridge.
| **AC:** Changes are persisted to the SQLite database file. All modifications are saved correctly. Cartridge state is preserved after save and reload.

| **T-CT-14** | FR-CT-3.30 (Content Validation) | 
. Create a cartridge with missing required metadata (e.g., no title).
. Attempt to finalize/export the cartridge.
| **AC:** Validation errors are displayed. Specific error messages indicate missing required fields. Cartridge cannot be finalized until validation passes.

| **T-CT-15** | FR-CT-3.31 (Hash Calculation) | 
. Create a cartridge with content.
. Finalize the cartridge for export.
. Check the `Cartridge_Security` table.
| **AC:** Content hash (H1) is calculated according to DDD Section 7 algorithm. Hash is stored in `Cartridge_Security` table. Hash includes all critical content tables as specified.

| **T-CT-16** | FR-CT-3.32 (Cartridge Signing - Level 1) | 
. Create a cartridge with content.
. Import a valid CA-signed certificate.
. Sign the cartridge at Level 1 (CA-signed).
. Export the cartridge.
| **AC:** Cartridge is signed with CA certificate. Signature is stored in `Cartridge_Security` table. Certificate data is stored correctly. Exported cartridge is recognized as Level 1 by Reader.

| **T-CT-17** | FR-CT-3.32 (Cartridge Signing - Level 2) | 
. Create a cartridge with content.
. Generate or import a self-signed certificate.
. Sign the cartridge at Level 2 (self-signed).
. Export the cartridge.
| **AC:** Cartridge is signed with self-signed certificate. Signature is stored in `Cartridge_Security` table. Exported cartridge is recognized as Level 2 by Reader.

| **T-CT-18** | FR-CT-3.32 (Cartridge Signing - Level 3) | 
. Create a cartridge with content.
. Export the cartridge without signing (Level 3 - unsigned).
| **AC:** Cartridge is exported without signature. `Cartridge_Security` table indicates no signature. Exported cartridge is recognized as Level 3 by Reader.

| **T-CT-19** | FR-CT-3.33 (Certificate Management) | 
. Open Creator Tool.
. Access certificate management interface.
. Import a certificate file.
. Generate a self-signed certificate.
. Select a certificate for signing.
| **AC:** Certificates can be imported successfully. Self-signed certificates can be generated. Certificate selection interface functions correctly. Certificates are stored and managed properly.

| **T-CT-20** | FR-CT-3.34 (Export Process) | 
. Create a cartridge with content, metadata, forms, and embedded apps.
. Execute export process.
. Verify exported file.
| **AC:** Export process follows DDD Section 7 algorithm. Content is assembled correctly. Hash is calculated. Signature is applied (if applicable). Database is finalized. Exported file is a valid SQLite database.

| **T-CT-21** | FR-CT-3.35 (Export Validation) | 
. Export a cartridge from Creator Tool.
. Open the exported cartridge in Reader application.
| **AC:** Exported cartridge opens successfully in Reader. All content displays correctly. Reader can access all cartridge features. No errors occur during Reader load.

|===

=== Metadata and Resource Management

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-22** | FR-CT-3.20 (Document Metadata) | 
. Create a new cartridge.
. Open metadata management interface.
. Enter title, author, publication year, version, and tags.
. Save metadata.
| **AC:** All metadata fields are saved to `Metadata` table. Metadata displays correctly in the interface. Metadata persists after save and reload.

| **T-CT-23** | FR-CT-3.21 (Cover Image Management) | 
. Open a cartridge in Creator Tool.
. Import a cover image file.
. Save the cartridge.
| **AC:** Cover image is stored correctly. `cover_image_path` in `Metadata` table is updated. Cover image is available for manifest. Image displays in preview.

| **T-CT-24** | FR-CT-3.23 (Schema Version Management) | 
. Create a new cartridge.
. Check the `Metadata` table.
| **AC:** `schema_version` field is set to current Smartbook Format Specification version. Version is stored correctly. Version indicates format compatibility.

| **T-CT-25** | FR-CT-3.24 (Asset Management) | 
. Open a cartridge in Creator Tool.
. Import an image file as a resource.
. Reference the image in content.
. Save the cartridge.
| **AC:** Resource is stored within the cartridge. Resource can be referenced in content. Resource persists after save. Resource is accessible when cartridge is opened in Reader.

| **T-CT-26** | FR-CT-3.25 (Resource Storage) | 
. Create a cartridge with embedded images and fonts.
. Export the cartridge.
. Verify exported file.
| **AC:** All resources are stored within the cartridge database or properly referenced. Cartridge file is portable (all resources included). Resources are accessible in exported cartridge.

|===

=== Form Definition Management

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-27** | FR-CT-3.16 (Form Creation) | 
. Open a cartridge in Creator Tool.
. Create a new form definition using Form Definition JSON Schema.
. Add form fields (text, number, select, etc.).
. Save the form definition.
| **AC:** Form definition is created using the JSON Schema. Form is stored in `Form_Definitions` table. Form definition is valid JSON conforming to the schema.

| **T-CT-28** | FR-CT-3.17 (Form Builder Interface) | 
. Open Creator Tool.
. Access the visual form builder interface.
. Add fields using the visual interface (without editing JSON directly).
. Configure validation rules.
. Organize fields into groups.
| **AC:** Visual form builder allows creating forms without direct JSON editing. Fields can be added and configured. Validation rules can be set. Field organization works correctly.

| **T-CT-29** | FR-CT-3.18 (Form Schema Validation) | 
. Open Creator Tool.
. Create a form definition with invalid JSON structure.
. Attempt to save the form.
| **AC:** Validation errors are displayed. Form cannot be saved until it conforms to Form Definition JSON Schema. Specific validation errors are shown.

| **T-CT-30** | FR-CT-3.19 (Form Integration) | 
. Create a form definition in Creator Tool.
. Insert form reference into a content page.
. Save the cartridge.
| **AC:** Form reference is inserted into content page. Form is linked correctly. Form displays when page is viewed in Reader.

|===

=== Auto-Save and Recovery

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-31** | FR-CT-3.37 (Auto-Save Functionality) | 
. Open a cartridge in Creator Tool.
. Make changes to content.
. Wait for auto-save interval (default 5 minutes, or configured interval).
| **AC:** Cartridge is automatically saved at the configured interval. Auto-save occurs without user intervention. Changes are persisted.

| **T-CT-32** | FR-CT-3.38 (Auto-Save Configuration) | 
. Open Creator Tool.
. Access auto-save configuration settings.
. Change auto-save interval.
. Disable auto-save.
. Re-enable auto-save.
| **AC:** Auto-save interval can be configured. Auto-save can be disabled and re-enabled. Configuration persists across sessions.

| **T-CT-33** | FR-CT-3.39 (Auto-Save Indication) | 
. Open a cartridge in Creator Tool.
. Make changes.
. Wait for auto-save to trigger.
| **AC:** Visual indication shows when auto-save is in progress. Visual indication shows when last auto-save completed successfully. Indicators are clear and non-intrusive.

| **T-CT-34** | FR-CT-3.40 (Recovery on Startup) | 
. Open a cartridge in Creator Tool.
. Make unsaved changes.
. Force close the application (simulate crash).
. Restart Creator Tool.
| **AC:** Creator Tool detects unsaved changes on startup. Recovery option is offered. Most recent auto-saved state can be restored. User can choose to recover or discard changes.

|===

=== Error Handling

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-35** | FR-ERR-4.8 (Content Validation Errors) | 
. Open Creator Tool.
. Create content with invalid HTML.
. Attempt to save.
| **AC:** Validation errors are displayed. Specific error messages indicate invalid HTML. User is informed of validation failures. Cartridge cannot be saved until errors are corrected.

| **T-CT-36** | FR-ERR-4.9 (Cartridge Creation Errors) | 
. Attempt to create a cartridge when disk is full (or simulate disk full condition).
| **AC:** Error is detected and displayed. Partial changes are rolled back. User is informed of the failure. Clear error message suggests corrective action.

| **T-CT-37** | FR-ERR-4.10 (Signing Errors) | 
. Attempt to sign a cartridge with an expired certificate.
. Attempt to sign without a private key.
| **AC:** Signing errors are detected. Clear error messages distinguish between error types (expired certificate, missing key, etc.). Corrective actions are suggested. Signing operation fails gracefully.

| **T-CT-38** | FR-ERR-4.11 (Export Errors) | 
. Create a cartridge with content.
. Attempt to export when disk is full (or simulate condition).
| **AC:** Export error is detected. Working cartridge state is preserved. Export operation can be retried. User is informed of the error condition.

| **T-CT-39** | FR-ERR-4.12 (Import Errors) | 
. Attempt to import an unsupported file format.
. Attempt to import a corrupted file.
| **AC:** Import errors are detected. Detailed error messages indicate what failed and why. User is informed of the failure. Import operation fails gracefully.

| **T-CT-40** | FR-CT-3.59 (Corruption Detection) | 
. Create a cartridge.
. Manually corrupt the SQLite database file.
. Attempt to open the corrupted cartridge in Creator Tool.
| **AC:** Corruption is detected when opening the file. Recovery options are offered when possible. User is informed of corruption. Clear error message is displayed.

|===

=== Stylesheet and Settings Management

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-41** | FR-CT-3.10 (CSS Stylesheet Attachment) | 
. Open a cartridge in Creator Tool.
. Attach a custom CSS stylesheet to the document.
. Save the cartridge.
| **AC:** CSS stylesheet is stored within the cartridge. Stylesheet controls structure (layout, positioning, spacing) as specified. Stylesheet is separate from content themes.

| **T-CT-42** | FR-CT-3.11 (Stylesheet Editing) | 
. Open a cartridge with an attached stylesheet.
. Edit the CSS stylesheet using the CSS editor.
. Save changes.
| **AC:** Stylesheet can be edited through the interface. CSS editor focuses on structural styling. Changes are saved and applied to content rendering.

| **T-CT-43** | FR-CT-3.12a (Settings Definition) | 
. Open a cartridge in Creator Tool.
. Access settings definition interface.
. Define rendering settings (font size, font family, theme, margins, line spacing, text alignment).
. Save settings.
| **AC:** Settings are saved to `Settings` table. All specified setting types can be defined. Settings are stored with correct `setting_type`.

| **T-CT-44** | FR-CT-3.12b (Settings Editor) | 
. Open Creator Tool.
. Access settings editor interface.
. Configure settings using appropriate input controls.
| **AC:** Settings editor provides appropriate input controls (number inputs for sizes, dropdowns for themes, etc.). Interface is intuitive and functional.

| **T-CT-45** | FR-CT-3.12c (Settings Validation) | 
. Open Creator Tool.
. Attempt to save invalid setting values (e.g., negative font size, invalid JSON).
| **AC:** Settings are validated according to `setting_type` before saving. Invalid values are rejected. Validation errors are displayed.

| **T-CT-46** | FR-CT-3.12d (Settings Preview) | 
. Open a cartridge in Creator Tool.
. Modify rendering settings.
. Preview content in preview pane.
| **AC:** Preview pane shows how settings affect content rendering. Settings changes are reflected in preview. Preview matches Reader rendering behavior.

|===

=== JavaScript and Embedded Applications

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-47** | FR-CT-3.13 (Custom JavaScript Storage) | 
. Open a cartridge in Creator Tool.
. Add custom JavaScript code to the document.
. Save the cartridge.
| **AC:** JavaScript code is stored as part of the document. JavaScript is accessible for embedded applications. Code persists after save.

| **T-CT-48** | FR-CT-3.14 (Embedded Application Definition) | 
. Open Creator Tool.
. Define an embedded application.
. Specify entry points, required scripts, required stylesheets, and metadata (name, description, appId).
. Save the embedded app definition.
| **AC:** Embedded application is defined using `Embedded_App_Manifest` structure. Definition is stored in `Embedded_Apps` table. All required fields are specified correctly.

| **T-CT-49** | FR-CT-3.15 (JavaScript Management) | 
. Open Creator Tool.
. Access JavaScript management interface.
. Edit JavaScript code.
. Validate JavaScript syntax.
. Organize script resources.
| **AC:** JavaScript code can be edited through the interface. JavaScript validation is performed. Script resources can be organized. Management interface functions correctly.

|===

=== Search and Import Capabilities

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-50** | FR-CT-3.26 (Content Search) | 
. Open a cartridge with multiple pages in Creator Tool.
. Search for text across the entire document.
. Search for text limited to current page.
| **AC:** Search functionality works across entire document. Search can be limited to current page. Search results are displayed correctly.

| **T-CT-51** | FR-CT-3.27 (Search Results) | 
. Perform a content search in Creator Tool.
. Review search results.
. Navigate to matching content locations.
| **AC:** Search results are displayed. Users can navigate to matching content locations. Navigation functions correctly.

| **T-CT-52** | FR-CT-3.49 (Markdown Import) | 
. Open Creator Tool.
. Import a Markdown file.
. Verify converted content.
| **AC:** Markdown syntax is converted to HTML. Appropriate page structures are created. Content is imported successfully.

| **T-CT-53** | FR-CT-3.50 (DOCX Import) | 
. Open Creator Tool.
. Import a Microsoft Word DOCX file.
. Verify imported content.
| **AC:** DOCX content is imported. Formatting and structure are preserved where possible. Content is converted to HTML format.

| **T-CT-54** | FR-CT-3.51 (HTML Import) | 
. Open Creator Tool.
. Import an HTML file or HTML fragment.
. Verify imported content.
| **AC:** HTML content is imported successfully. HTML structure is preserved. Content can be edited in Creator Tool.

| **T-CT-55** | FR-CT-3.52 (Import Validation) | 
. Attempt to import content with formatting issues.
. Review validation feedback.
| **AC:** Imported content is validated. Feedback is provided on formatting or structure issues. Issues requiring manual adjustment are identified.

|===

=== Draft and Publishing States

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-56** | FR-CT-3.41 (Draft Mode) | 
. Create a new cartridge in Creator Tool.
. Add content without finalizing.
. Save as draft.
| **AC:** Cartridge can be saved in draft mode. Draft state is tracked. Cartridge can be edited without finalization.

| **T-CT-57** | FR-CT-3.42 (Publishing State) | 
. Create a cartridge with content.
. Finalize and sign the cartridge.
. Mark as published.
| **AC:** Cartridge state distinguishes between draft and published. Published cartridges are finalized and optionally signed. State is tracked correctly.

| **T-CT-58** | FR-CT-3.43 (State Management) | 
. Create a draft cartridge.
. Attempt to sign the cartridge before finalization.
. Finalize the cartridge.
. Attempt to sign after finalization.
| **AC:** Certain operations (e.g., signing) are prevented on draft cartridges. State management prevents invalid operations. State transitions work correctly.

| **T-CT-59** | FR-CT-3.44 (Publish Workflow) | 
. Create a cartridge with content.
. Execute publish workflow.
. Complete validation, signing (if applicable), and finalization.
| **AC:** Publish workflow guides users through required steps. Validation is performed. Signing is applied if applicable. Cartridge is finalized and marked as published.

|===

=== Content Templates

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-60** | FR-CT-3.45 (Template Creation) | 
. Open Creator Tool.
. Create a content template with page structure, styling, form definitions, and embedded app configurations.
. Save the template.
| **AC:** Template is created and saved. Template includes all specified components. Template can be reused.

| **T-CT-61** | FR-CT-3.46 (Template Library) | 
. Open Creator Tool.
. Access template library.
. Browse available templates.
. Preview a template.
| **AC:** Template library displays available templates. Templates can be browsed and previewed. Library interface functions correctly.

| **T-CT-62** | FR-CT-3.47 (Template Application) | 
. Open Creator Tool.
. Create a new cartridge.
. Apply a template to the cartridge.
. Verify template content is populated.
| **AC:** Template can be applied to new cartridges. Content structure and styles are populated. Customization is allowed after template application.

| **T-CT-63** | FR-CT-3.48 (Template Management) | 
. Open Creator Tool.
. Create, edit, delete, import, and export templates.
| **AC:** All template management operations function correctly. Templates can be created, edited, deleted, imported, and exported. Management interface works as expected.

|===

=== Version History

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-64** | FR-CT-3.54 (Version Tracking) | 
. Open a cartridge in Creator Tool.
. Make changes to content and metadata.
. Create version snapshots at different points.
| **AC:** Version history is maintained for the cartridge. Changes to content, metadata, and structure are tracked over time. Version snapshots are created successfully.

| **T-CT-65** | FR-CT-3.55 (Version Snapshots) | 
. Open a cartridge in Creator Tool.
. Create manual version snapshots.
. Make significant edits.
. Verify snapshots are created at milestones.
| **AC:** Version snapshots are created at significant milestones. Manual snapshots can be created. Snapshots capture cartridge state correctly.

| **T-CT-66** | FR-CT-3.56 (Version Comparison) | 
. Open a cartridge with multiple versions in Creator Tool.
. Compare two different versions.
| **AC:** Version comparison functionality works correctly. Changes in content, metadata, and structure are highlighted. Comparison interface displays differences clearly.

| **T-CT-67** | FR-CT-3.57 (Version Restoration) | 
. Open a cartridge with multiple versions in Creator Tool.
. Restore cartridge to a previous version.
. Choose to create new version or replace current version.
| **AC:** Cartridge can be restored to a previous version. Option to create new version or replace current version is available. Restoration works correctly.

| **T-CT-68** | FR-CT-3.58 (Version Metadata) | 
. Create version snapshots in Creator Tool.
. Add user-provided notes describing changes.
. Review version metadata.
| **AC:** Each version snapshot stores metadata (timestamp, version number/identifier, optional notes). Version metadata is displayed correctly. Notes can be added and viewed.

|===

=== Accessibility

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-69** | FR-CT-3.64 (Keyboard Navigation) | 
. Open Creator Tool.
. Navigate all editing and navigation functions using keyboard only (no mouse).
| **AC:** All editing and navigation functions are accessible via keyboard. Full keyboard navigation is supported. Application can be operated without a mouse.

| **T-CT-70** | FR-CT-3.65 (Screen Reader Support) | 
. Open Creator Tool with screen reader enabled.
. Navigate through UI elements.
| **AC:** Creator Tool is compatible with screen readers. Appropriate ARIA labels and semantic markup are provided. All UI elements are accessible via screen reader.

| **T-CT-71** | FR-CT-3.66 (High Contrast Mode) | 
. Open Creator Tool.
. Enable high contrast display mode.
. Verify interface displays correctly.
| **AC:** High contrast display mode is supported. Interface displays correctly in high contrast mode. All UI elements are visible and functional.

| **T-CT-72** | FR-CT-3.67 (Font Scaling) | 
. Open Creator Tool.
. Scale UI font size.
. Use zoom functionality for editing interface.
| **AC:** UI font size can be scaled. Zoom functionality works for editing interface. Scaling and zoom persist across sessions.

| **T-CT-73** | FR-CT-3.68 (Accessibility Standards) | 
. Verify Creator Tool compliance with WCAG 2.1 Level AA standards.
| **AC:** Creator Tool complies with WCAG 2.1 Level AA standards. All essential functions are accessible via keyboard. Content is readable by screen readers. Visual elements meet contrast requirements.

| **T-CT-74** | FR-CT-3.69 (Keyboard Shortcuts Documentation) | 
. Open Creator Tool.
. Access keyboard shortcuts documentation.
. Verify documentation is accessible.
| **AC:** Keyboard shortcuts documentation is available within the application. Documentation is accessible. All shortcuts are documented.

|===

=== UI Theming Support

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-75** | FR-CT-3.75 (Built-in UI Themes) | 
. Open Creator Tool.
. Verify three built-in themes are available: Light, Dark, Sepia.
| **AC:** Three immutable built-in themes are available. Light theme is the default. All themes are accessible.

| **T-CT-76** | FR-CT-3.76 (UI Theme Selection) | 
. Open Creator Tool.
. Switch between built-in UI themes.
. Close and reopen Creator Tool.
| **AC:** UI themes can be selected and switched. Theme selection persists across application sessions. Theme changes apply immediately.

| **T-CT-77** | FR-CT-3.77 (Custom UI Theme Creation) | 
. Open Creator Tool.
. Create a custom UI theme.
. Modify UI colors, fonts, and styling.
. Save the custom theme.
| **AC:** Custom UI themes can be created. UI colors, fonts, and styling can be modified. Custom themes can be saved.

| **T-CT-78** | FR-CT-3.78 (Custom UI Theme Management) | 
. Open Creator Tool.
. Save, load, edit, and delete custom UI themes.
| **AC:** Custom UI themes can be saved, loaded, edited, and deleted. Themes are stored locally and persist across sessions. Management operations work correctly.

| **T-CT-79** | FR-CT-3.79 (UI Theme Application) | 
. Open Creator Tool.
. Apply a UI theme (built-in or custom).
| **AC:** UI theme changes apply immediately to entire Creator Tool interface. Menu bars, toolbars, sidebars, and editing areas are updated. Theme application works correctly.

| **T-CT-80** | FR-CT-3.80 (UI Theme Preview) | 
. Open Creator Tool.
. Preview a UI theme before applying.
| **AC:** UI theme preview is available. Preview shows how interface will look with selected theme. Preview is accurate.

| **T-CT-81** | FR-CT-3.81 (UI Theme Export/Import) | 
. Open Creator Tool.
. Export a custom UI theme.
. Import a UI theme created by another user.
| **AC:** Custom UI themes can be exported to shareable files. UI themes can be imported from files. Export/import functions work correctly.

|===

=== Content Theme Management

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-CT-82** | FR-CT-3.82 (Content Theme Manager Dialog) | 
. Open Creator Tool.
. Open Content Theme Manager dialog.
. Verify dialog structure (left panel with themes, right panel with configuration/preview).
| **AC:** Content Theme Manager dialog displays correctly. Left panel shows available themes with Apply buttons. Right panel shows theme configuration and live preview. Dialog structure matches specification.

| **T-CT-83** | FR-CT-3.83 (Content Theme List) | 
. Open Content Theme Manager in Creator Tool.
. Review available content themes list.
. Apply a theme to current cartridge.
| **AC:** List of available content themes is displayed. Built-in themes are immutable and clearly distinguished. Apply buttons function correctly. Themes can be applied to cartridge.

| **T-CT-84** | FR-CT-3.84 (Content Theme Actions) | 
. Open Content Theme Manager in Creator Tool.
. Add a new content theme.
. Copy an existing theme.
. Rename a custom theme.
. Delete a custom theme.
. Attempt to delete/rename a built-in theme.
| **AC:** Add, Copy, Rename, and Delete actions work for custom themes. Built-in themes cannot be deleted or renamed. All theme management actions function correctly.

| **T-CT-85** | FR-CT-3.85 (Persist on Add) | 
. Open Content Theme Manager in Creator Tool.
. Enable "Persist on add" checkbox.
. Create a new theme.
| **AC:** "Persist on add" checkbox is available. When enabled, theme is automatically saved to cartridge's theme library when created or modified. Persistence works correctly.

| **T-CT-86** | FR-CT-3.86 (Content Theme Configuration) | 
. Open Content Theme Manager in Creator Tool.
. Configure theme name, core colors (Primary, On Primary, Surface, On Surface, Background).
. Use color pickers/swatches.
. Select color presets.
. Reset colors to default.
| **AC:** Theme configuration panel allows setting theme name. Core colors can be configured using color pickers/swatches. Color presets can be selected. Colors can be reset to defaults. Configuration interface works correctly.

| **T-CT-87** | FR-CT-3.87 (Content Theme Live Preview) | 
. Open Content Theme Manager in Creator Tool.
. Modify theme configuration.
. Review live preview panel.
| **AC:** Live preview panel displays sample content with current theme configuration. Preview shows headings, body text, links, emphasis, inline code, quoted text, tables. Preview updates as configuration changes.

| **T-CT-88** | FR-CT-3.88 (Content Theme Actions) | 
. Open Content Theme Manager in Creator Tool.
. Modify a theme.
. Use Apply, Save, Cancel, and Revert buttons.
| **AC:** Apply button applies theme to current cartridge. Save button saves theme configuration (enabled when modified). Cancel discards changes and closes dialog. Revert reverts theme to last saved state. All action buttons function correctly.

| **T-CT-89** | FR-CT-3.89 (Content Theme Storage) | 
. Open Creator Tool.
. Create content themes in a cartridge.
. Save the cartridge.
. Reopen the cartridge.
| **AC:** Content themes are stored within the cartridge file. Themes are accessible when editing the cartridge. Themes are applied to content rendering in Reader. Storage works correctly.

| **T-CT-90** | FR-CT-3.90 (Content Theme Application) | 
. Open Creator Tool.
. Apply a content theme to a cartridge.
. Preview content in Creator Tool.
. Export cartridge and view in Reader.
| **AC:** When theme is applied, cartridge's theme settings are updated. Theme controls colors and fonts (visual appearance and typography). CSS stylesheet controls structure (layout, positioning, spacing). Theme affects content in both Creator Tool preview and Reader.

|===

== Test Cases: Error Scenario Validation

=== Reader Application Error Scenarios

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-ERR-01** | FR-ERR-4.1 (Cartridge File Not Found) | 
. Attempt to open a cartridge file that has been moved or deleted.
. Verify error handling.
| **AC:** User-friendly error message displayed: "Cartridge file not found. It may have been moved or deleted." Error is logged with ERROR level including file path and error details. Reader returns to Library Manager.

| **T-ERR-02** | FR-ERR-4.1 (Invalid SQLite Format) | 
. Create a file with invalid SQLite format (e.g., text file renamed to .smartbook).
. Attempt to open the file in Reader.
| **AC:** Error message displayed: "Invalid cartridge format. The file may be corrupted." Error is logged with ERROR level. Reader does not crash. User can return to Library Manager.

| **T-ERR-03** | FR-ERR-4.1 (File Corruption) | 
. Create a valid cartridge.
. Manually corrupt the SQLite database file (alter bytes).
. Attempt to open the corrupted cartridge in Reader.
| **AC:** SQLite corruption is detected via integrity checks. Recovery is attempted if possible. If recovery fails, error displayed with option to delete corrupted cartridge. Error is logged with ERROR level.

| **T-ERR-04** | FR-ERR-4.1 (File Permission Errors) | 
. Create a cartridge file with read-only permissions (or no read permission).
. Attempt to open the cartridge in Reader.
| **AC:** Error message displayed: "Cannot access cartridge file. Check file permissions." Error is logged with ERROR level. Reader handles permission errors gracefully.

| **T-ERR-05** | FR-ERR-4.2 (Database Locked) | 
. Open a cartridge in Reader.
. Attempt to open the same cartridge in another Reader instance (or lock the database file externally).
| **AC:** Reader detects database locked error. Retry with exponential backoff (max 3 retries). If still locked, error displayed: "Cartridge is in use by another application." Error is logged with ERROR level.

| **T-ERR-06** | FR-ERR-4.2 (Disk Full) | 
. Fill disk to capacity (or simulate disk full condition).
. Attempt to perform operations that require disk writes (e.g., save form data, update manifest).
| **AC:** Disk full error is detected. Error message displayed: "Insufficient disk space. Free up space and try again." Error is logged with ERROR level. Operation fails gracefully without data loss.

| **T-ERR-07** | FR-ERR-4.2 (SQLite Corruption - Connection) | 
. Create a cartridge with valid content.
. Corrupt the SQLite database file.
. Attempt to open and read from the cartridge.
| **AC:** SQLite corruption detected during connection. Recovery attempted using `PRAGMA integrity_check`. If recovery fails, error displayed with option to delete corrupted cartridge. Error is logged with ERROR level.

| **T-ERR-08** | FR-ERR-4.2 (Connection Timeout) | 
. Place cartridge on slow storage device (or simulate slow I/O).
. Attempt to open cartridge with connection timeout.
| **AC:** Connection timeout detected. Error message displayed: "Database connection timeout. The cartridge may be on a slow storage device." Error is logged with ERROR level. Reader handles timeout gracefully.

| **T-ERR-09** | FR-ERR-4.3 (Invalid Signature) | 
. Create a cartridge and sign it.
. Manually alter the signature data in `Cartridge_Security` table.
. Attempt to load the cartridge in Reader.
| **AC:** Invalid signature detected. Error message displayed: "Cartridge signature is invalid. The content may have been tampered with or corrupted." App execution is blocked. Error is logged as security event with WARN level.

| **T-ERR-10** | FR-ERR-4.3 (Expired Certificate) | 
. Create a cartridge signed with an expired CA certificate.
. Attempt to load the cartridge in Reader.
| **AC:** Expired certificate detected. Cartridge is downgraded to Level 2 (Self-Signed Trust). Integrity warning displayed. Error message: "The cartridge's security certificate has expired. Contact the publisher for an updated version." Apps require consent.

| **T-ERR-11** | FR-ERR-4.3 (Untrusted CA) | 
. Create a cartridge signed with a certificate from an untrusted CA.
. Attempt to load the cartridge in Reader.
| **AC:** Untrusted CA detected. Error message displayed: "The cartridge's security certificate is not from a trusted authority. Proceed with caution." Cartridge loaded at Level 2. Apps require consent.

| **T-ERR-12** | FR-ERR-4.3 (Corrupted Security Data) | 
. Create a signed cartridge.
. Corrupt the `Cartridge_Security` table data.
. Attempt to load the cartridge in Reader.
| **AC:** Corrupted security data detected. Error message displayed: "Cartridge security data is corrupted. The file may be damaged." App execution is blocked. Error is logged with ERROR level.

| **T-ERR-13** | FR-ERR-4.3 (Hash Mismatch - Tampering) | 
. Create a signed cartridge and add to trust registry.
. Manually alter content in `Content_Pages` table (change one byte).
. Attempt to load the cartridge in Reader.
| **AC:** Hash mismatch detected (H2 recalculation differs from stored hash). Error message displayed: "Cartridge integrity check failed. The file has been modified since it was signed. For security reasons, execution is blocked." Cartridge is rejected regardless of trust status. Error is logged as security event with WARN level.

| **T-ERR-14** | FR-ERR-4.4 (Disk Full - File System) | 
. Fill disk to capacity.
. Attempt to import a new cartridge.
| **AC:** Disk full error detected before file copy. Error message displayed: "Insufficient disk space. Free up [X] MB and try again." Import operation fails gracefully. Error is logged with ERROR level.

| **T-ERR-15** | FR-ERR-4.4 (Permission Denied) | 
. Attempt to import cartridge to a directory without write permissions.
. Attempt to save form data when database directory lacks write permissions.
| **AC:** Permission denied error detected. Error message displayed: "Permission denied. Check file permissions or run as administrator." Operation fails gracefully. Error is logged with ERROR level.

| **T-ERR-16** | FR-ERR-4.4 (Path Too Long) | 
. Attempt to import cartridge to a path exceeding system path length limits.
| **AC:** Path too long error detected. Error message displayed: "File path is too long. Move the cartridge to a shorter path." Import operation fails gracefully. Error is logged with ERROR level.

| **T-ERR-17** | FR-ERR-4.4 (Invalid Characters) | 
. Attempt to import cartridge with invalid characters in filename or path.
| **AC:** Invalid characters detected. Path is sanitized if possible, or error displayed. Warning shown if sanitization occurred. Operation completes or fails gracefully based on sanitization success.

| **T-ERR-18** | FR-ERR-4.5 (Manifest Update Failure) | 
. Fill disk to capacity (or lock local database).
. Attempt to import a cartridge (which triggers manifest update).
| **AC:** Manifest update fails. Error dialog displayed with operation type, cartridge info, error message, context, and suggested resolution. "Copy Error Details" button available. Operation continues (non-blocking). Error is logged with ERROR level. Update is retried on next application launch.

| **T-ERR-19** | FR-ERR-4.6 (Sandbox Path Traversal) | 
. Load a cartridge with embedded app.
. From embedded app JavaScript, attempt to access files outside sandbox using path traversal (e.g., `../../../etc/passwd`).
| **AC:** Path traversal attempt is blocked. Sandbox API returns error code: `PERMISSION_DENIED` or `INVALID_PATH`. Operation is blocked. Error is logged with WARN level.

| **T-ERR-20** | FR-ERR-4.6 (Sandbox Invalid Filename) | 
. Load a cartridge with embedded app.
. From embedded app JavaScript, attempt to create file with invalid filename (e.g., null bytes, control characters).
| **AC:** Invalid filename is rejected. Sandbox API returns error code: `INVALID_FILENAME`. Operation is blocked. Error is logged with WARN level.

| **T-ERR-21** | FR-ERR-4.6 (Sandbox File Size Limit) | 
. Load a cartridge with embedded app.
. From embedded app JavaScript, attempt to save file exceeding size limit (e.g., 10MB).
| **AC:** File size limit exceeded. Sandbox API returns error code: `FILE_TOO_LARGE`. Operation is blocked. Error is logged with WARN level.

| **T-ERR-22** | FR-ERR-4.6 (Sandbox Disk Space Exhaustion) | 
. Fill disk to capacity.
. Load a cartridge with embedded app.
. From embedded app JavaScript, attempt to save file to sandbox.
| **AC:** Disk space exhaustion detected. Sandbox API returns error code: `DISK_FULL`. Operation is blocked. Error is logged with WARN level.

| **T-ERR-23** | FR-ERR-4.7 (WebEngine Crash) | 
. Load a cartridge with content that causes WebEngine to crash (e.g., malformed HTML, excessive memory usage).
| **AC:** WebEngine crash is detected. Reader does not crash. Error is logged with ERROR level. Recovery options provided: reload page, close app. User can continue using Reader.

| **T-ERR-24** | FR-ERR-4.7 (JavaScript Error) | 
. Load a cartridge with embedded JavaScript that throws errors.
. Execute the JavaScript code.
| **AC:** JavaScript errors are caught and logged. Reader does not crash. Errors are logged with WARN level. Content continues to render. User can continue using Reader.

|===

=== Creator Tool Error Scenarios

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-ERR-25** | FR-ERR-4.8 (Invalid HTML) | 
. Open Creator Tool.
. Create content with invalid HTML (e.g., unclosed tags, malformed structure).
. Attempt to save the cartridge.
| **AC:** Validation errors are displayed. Specific error messages indicate invalid HTML with line numbers. Cartridge cannot be saved until errors are corrected. Errors displayed in validation panel.

| **T-ERR-26** | FR-ERR-4.8 (Malformed JSON Schema) | 
. Open Creator Tool.
. Create a form definition with malformed JSON (e.g., missing closing brace, invalid syntax).
. Attempt to save the form definition.
| **AC:** Validation errors are displayed. Specific error messages indicate malformed JSON schema. Form cannot be saved until errors are corrected. Errors displayed in validation panel.

| **T-ERR-27** | FR-ERR-4.8 (Missing Required Metadata) | 
. Create a new cartridge in Creator Tool.
. Attempt to export without providing required metadata (e.g., title).
| **AC:** Validation errors are displayed. Specific error messages indicate missing required metadata fields. Export operation is prevented. User must provide required metadata before exporting.

| **T-ERR-28** | FR-ERR-4.8 (Invalid Form Definition) | 
. Open Creator Tool.
. Create a form definition that violates Form Definition JSON Schema (e.g., invalid field type, missing required properties).
. Attempt to save the form.
| **AC:** Validation errors are displayed. Specific error messages indicate invalid form definition with details. Form cannot be saved until errors are corrected. Errors displayed in validation panel.

| **T-ERR-29** | FR-ERR-4.8 (Resource Reference Error) | 
. Open Creator Tool.
. Create content that references a resource (image, font) that does not exist.
. Attempt to save or export the cartridge.
| **AC:** Validation error displayed: "Referenced resource '[path]' not found." Export operation is prevented. User must fix resource references before exporting.

| **T-ERR-30** | FR-ERR-4.9 (Database Initialization Failure) | 
. Attempt to create a new cartridge when disk is full (or database directory lacks write permissions).
| **AC:** Database initialization failure detected. Partial changes are rolled back. Error message displayed: "Failed to create cartridge database. Check disk space and permissions." Error is logged with ERROR level.

| **T-ERR-31** | FR-ERR-4.9 (GUID Generation Failure) | 
. Simulate GUID generation failure (or exhaust UUID generation attempts).
. Attempt to create a new cartridge.
| **AC:** GUID generation failure detected. Retry attempted. If persistent failure, error message displayed: "Failed to generate unique identifier. Try again." Error is logged with ERROR level.

| **T-ERR-32** | FR-ERR-4.9 (Schema Creation Error) | 
. Corrupt the cartridge database during schema creation (or simulate schema creation failure).
. Attempt to create a new cartridge.
| **AC:** Schema creation error detected. Database is rolled back. Error message displayed: "Failed to create cartridge structure. The cartridge file may be corrupted." Error is logged with ERROR level.

| **T-ERR-33** | FR-ERR-4.10 (Invalid Certificate Format) | 
. Open Creator Tool.
. Attempt to import a certificate file that is not a valid certificate (e.g., text file, corrupted certificate).
| **AC:** Invalid certificate format detected. Error message displayed: "Certificate file is invalid or corrupted. Select a valid certificate file." Import fails gracefully. User can select a different certificate file.

| **T-ERR-34** | FR-ERR-4.10 (Expired Certificate - Signing) | 
. Open Creator Tool.
. Attempt to sign a cartridge using an expired certificate.
| **AC:** Expired certificate detected. Error message displayed: "Certificate has expired. Use a valid certificate or generate a new one." Signing operation is prevented. User can select a different certificate.

| **T-ERR-35** | FR-ERR-4.10 (Missing Private Key) | 
. Open Creator Tool.
. Attempt to sign a cartridge without providing the private key.
| **AC:** Missing private key detected. Error message displayed: "Private key file not found. Provide the private key for signing." Signing operation is prevented. User can provide the private key and retry.

| **T-ERR-36** | FR-ERR-4.10 (Signing Failure) | 
. Open Creator Tool.
. Attempt to sign a cartridge with mismatched certificate and private key.
| **AC:** Signing failure detected. Error message displayed: "Failed to sign cartridge. Check certificate and key files." Signing operation fails gracefully. User can correct certificate/key issues and retry.

| **T-ERR-37** | FR-ERR-4.10 (Certificate Import Error) | 
. Open Creator Tool.
. Attempt to import a certificate file with import errors (e.g., file locked, read permission denied).
| **AC:** Certificate import error detected. Error message displayed: "Failed to import certificate. Verify the certificate file format." Import fails gracefully. User can select a different certificate file.

| **T-ERR-38** | FR-ERR-4.11 (File Write Error) | 
. Open Creator Tool.
. Create a cartridge with content.
. Attempt to export to a location without write permissions.
| **AC:** File write error detected. Error message displayed: "Failed to write cartridge file. Check disk space and permissions." Working cartridge state is preserved. Export operation can be retried after resolving the issue.

| **T-ERR-39** | FR-ERR-4.11 (Disk Full - Export) | 
. Open Creator Tool.
. Create a cartridge with content.
. Fill disk to capacity.
. Attempt to export the cartridge.
| **AC:** Disk full error detected. Error message displayed: "Insufficient disk space. Free up [X] MB and try again." Working cartridge state is preserved. Export operation can be retried after freeing disk space.

| **T-ERR-40** | FR-ERR-4.11 (Permission Error - Export) | 
. Open Creator Tool.
. Create a cartridge with content.
. Attempt to export to a directory without write permissions.
| **AC:** Permission error detected. Error message displayed: "Permission denied. Check file permissions or choose a different location." Working cartridge state is preserved. Export operation can be retried after resolving permissions.

| **T-ERR-41** | FR-ERR-4.11 (Hash Calculation Failure) | 
. Open Creator Tool.
. Create a cartridge with content.
. Simulate hash calculation failure during export.
| **AC:** Hash calculation failure detected. Error message displayed: "Failed to calculate content hash. Try exporting again." Working cartridge state is preserved. Export operation can be retried.

| **T-ERR-42** | FR-ERR-4.12 (Unsupported File Format) | 
. Open Creator Tool.
. Attempt to import a file with unsupported format (e.g., .txt, .pdf).
| **AC:** Unsupported file format detected. Detailed error message indicates what failed and why: "Unsupported file format. Supported formats: Markdown (.md), DOCX (.docx), HTML (.html, .htm)." Import operation fails gracefully.

| **T-ERR-43** | FR-ERR-4.12 (Corrupted Source File) | 
. Open Creator Tool.
. Attempt to import a corrupted source file (e.g., corrupted DOCX, corrupted Markdown).
| **AC:** Corrupted source file detected. Detailed error message indicates what failed and why: "Source file is corrupted or invalid. Cannot import file." Import operation fails gracefully.

| **T-ERR-44** | FR-ERR-4.12 (Missing Resources - Import) | 
. Open Creator Tool.
. Attempt to import HTML file that references external resources (images, stylesheets) that are not available.
| **AC:** Missing resources detected. Detailed error message indicates what failed and why: "Referenced resources not found: [list of missing resources]." Import operation may complete with warnings, or fail if resources are critical.

| **T-ERR-45** | FR-ERR-4.12 (Import Validation Errors) | 
. Open Creator Tool.
. Import content that has validation issues (e.g., formatting problems, structure issues).
| **AC:** Import validation errors are detected. Feedback provided on formatting or structure issues. Issues requiring manual adjustment are identified. User can review and fix issues.

| **T-ERR-46** | FR-ERR-4.13 (Resource File Not Found) | 
. Open Creator Tool.
. Attempt to add a resource (image, font) that does not exist at the specified path.
| **AC:** Resource file not found error detected. Error message displayed: "Resource file not found: [path]." Resource is not added to cartridge. User can correct the path and retry.

| **T-ERR-47** | FR-ERR-4.13 (Invalid Image Format) | 
. Open Creator Tool.
. Attempt to add an image file with unsupported format (e.g., .exe file renamed to .jpg).
| **AC:** Invalid image format detected. Resource is validated before adding. Error message displayed: "Invalid image format. Supported formats: [list]." Resource is not added to cartridge.

| **T-ERR-48** | FR-ERR-4.13 (File Size Limit Exceeded) | 
. Open Creator Tool.
. Attempt to add a resource file that exceeds size limits (e.g., 50MB image file).
| **AC:** File size limit exceeded error detected. Error message displayed: "File size exceeds limit. Maximum size: [X] MB." Resource is not added to cartridge. User can use a smaller file.

| **T-ERR-49** | FR-ERR-4.13 (Resource Path Error) | 
. Open Creator Tool.
. Attempt to add a resource with invalid path (e.g., path traversal, invalid characters).
| **AC:** Resource path error detected. Path is validated before adding. Error message displayed: "Invalid resource path: [path]." Resource is not added to cartridge. User can correct the path.

|===

== Test Cases: Performance Validation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PERF-01** | NFR-3.1 (Library Load Performance) | 
. Create a library with 100+ cartridges.
. Open the Library Manager.
. Measure time from application launch until all metadata is displayed.
| **AC:** Library View (Bookshelf or List) loads and displays all required metadata fields (Title, Author, Year, Cover Image) within **500 milliseconds**. Performance demonstrates reliance on manifest data, not file parsing.

| **T-PERF-02** | FR-2.9.8 (Search Performance) | 
. Open a cartridge with 100+ pages.
. Perform a document search across all pages.
. Measure search completion time.
| **AC:** Search completes within **2 seconds** for cartridges with 100+ pages. Search results are displayed correctly. Optional indexing/caching may be used to improve performance.

| **T-PERF-03** | Large Cartridge Opening | 
. Create or obtain a very large cartridge (1000+ pages, 100MB+ database size).
. Open the cartridge in Reader.
. Measure time from open request until content is displayed.
| **AC:** Large cartridge opens and displays content within reasonable time (< 5 seconds for 1000+ pages). No application freezing or unresponsiveness. User can interact with content after opening.

| **T-PERF-04** | Concurrent Window Operations | 
. Open 5+ cartridges simultaneously in separate Reader View Windows.
. Perform operations in each window (navigate pages, save form data, search).
. Monitor application responsiveness and memory usage.
| **AC:** All windows remain responsive. Operations complete without noticeable delay. No performance degradation observed. Memory usage is reasonable (no excessive memory consumption).

| **T-PERF-05** | Large Library Performance | 
. Create a library with 500+ cartridges.
. Open the Library Manager.
. Perform operations (browse, search library, toggle views).
. Measure operation response times.
| **AC:** Library Manager remains responsive with 500+ cartridges. All operations complete without noticeable delay. Library load time may exceed 500ms but remains reasonable (< 2 seconds). No application freezing.

| **T-PERF-06** | Form Data Save/Load Performance | 
. Open a cartridge with forms.
. Save form data multiple times.
. Load form data.
. Measure operation times.
| **AC:** Form data save/load operations complete without noticeable delay (< 200ms user-perceived "instant"). Operations are near-instantaneous for typical form data sizes.

| **T-PERF-07** | Content Rendering Performance | 
. Open cartridges with various content sizes (small, medium, large pages).
. Navigate between pages.
. Measure page rendering time.
| **AC:** Content rendering completes without noticeable delay (< 200ms user-perceived "instant"). Page navigation is smooth. No visible lag or stuttering.

| **T-PERF-08** | Performance Regression Baseline | 
. Establish baseline performance metrics for key operations during initial development.
. Document baseline times for: library load, cartridge open, search, form operations.
| **AC:** Baseline metrics documented. Metrics can be used for regression testing to ensure performance doesn't degrade with code changes.

|===

**Performance Testing Notes:**

* Most operations in a native desktop application using SQLite will be near-instantaneous (< 100ms)
* Performance testing focuses on measurable scenarios and regression prevention
* User-perceived performance (feels instant) is prioritized over microsecond measurements
* Stress testing identifies breaking points rather than setting strict thresholds for all operations

== Test Cases: Qt WebEngine Configuration Validation

=== WebEngine Configuration and Standards

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-WE-01** | FR-WE-5.1 (Profile Configuration) | 
. Launch Reader application.
. Open a cartridge.
. Verify WebEngine profile is configured.
| **AC:** WebEngine profile is created and configured with appropriate settings. Profile settings match specification (security, performance, cache). Profile is used by QWebEngineView.

| **T-WE-02** | FR-WE-5.2 (JavaScript Engine Version) | 
. Launch Reader application.
. Check JavaScript engine version information (About dialog or logs).
| **AC:** Application reports V8 engine version. Version matches Qt WebEngine version requirements. Version is documented in application or logs.

| **T-WE-03** | FR-WE-5.3 (HTML/CSS Standards) | 
. Create test cartridge with HTML5 features (semantic elements, canvas, video).
. Create test cartridge with CSS3 features (flexbox, grid, animations).
. Open cartridges in Reader.
| **AC:** HTML5 features render correctly. CSS3 features render correctly. Standards compliance matches Chromium version capabilities. No rendering errors.

| **T-WE-04** | FR-WE-5.4 (Security Settings) | 
. Launch Reader with embedded app.
. Attempt to access local file system from JavaScript (FileReader API).
. Attempt to make network request from embedded app.
. Verify plugins are disabled.
| **AC:** Local file system access blocked (except via WebChannel). Network requests blocked by interceptor. Plugins disabled. Security settings enforced correctly.

| **T-WE-05** | FR-WE-5.5 (Performance Settings) | 
. Launch Reader with multiple cartridges open.
. Monitor memory usage per view.
. Check hardware acceleration status (if available).
. Verify cache is working.
| **AC:** Memory usage is reasonable per view (~50-100MB). Hardware acceleration enabled if available. Cache is working correctly. Performance is acceptable.

| **T-WE-06** | FR-WE-5.6 (Profile Isolation) | 
. Open cartridge with content.
. Open embedded app in same cartridge.
. Verify profiles are separate.
. Check that settings don't interfere.
| **AC:** Content rendering uses separate profile from embedded apps. Each embedded app has isolated profile or view. Profiles do not interfere with each other. Settings are independent.

| **T-WE-07** | FR-WE-5.7 (Network Interceptor) | 
. Launch embedded app.
. Attempt to use fetch() to make HTTP request.
. Attempt to use XMLHttpRequest.
. Attempt to use WebSocket.
. Monitor network traffic.
| **AC:** All network requests are blocked by interceptor. Error messages indicate request was blocked. No network traffic occurs. Interceptor logs blocked requests.

| **T-WE-08** | FR-WE-5.8 (CSP Headers) | 
. Launch embedded app.
. Check HTTP headers for CSP policy (via developer tools or logs).
. Attempt to violate CSP policy (e.g., external script).
| **AC:** CSP headers are set correctly. CSP policy matches specification. CSP violations are logged or blocked. Policy is enforced.

| **T-WE-09** | FR-WE-5.9 (WebChannel Configuration) | 
. Launch Reader with cartridge containing forms.
. Verify SmartbookBridge is available in JavaScript (check window.SmartbookBridge).
. Call WebChannel API method (e.g., saveFormData).
| **AC:** SmartbookBridge object is accessible from JavaScript. WebChannel communication works correctly. API methods can be called from JavaScript. Callbacks receive responses.

| **T-WE-10** | FR-WE-5.10 (Error Handling) | 
. Load cartridge with JavaScript errors.
. Simulate WebEngine process crash (if possible).
. Verify error handling.
| **AC:** JavaScript errors are caught and logged. Process crashes are detected. Recovery options are provided (reload, close). Application does not crash.

|===

=== Network Blocking Security Tests

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-WE-11** | Network Blocking - fetch() | 
. Create embedded app that uses fetch() API to request HTTP resource.
. Launch app in Reader.
. Monitor network traffic (Wireshark or similar).
| **AC:** fetch() requests are blocked. No network traffic occurs. Error is returned to JavaScript. Request is logged as blocked.

| **T-WE-12** | Network Blocking - XMLHttpRequest | 
. Create embedded app that uses XMLHttpRequest to request HTTP resource.
. Launch app in Reader.
. Monitor network traffic.
| **AC:** XMLHttpRequest is blocked. No network traffic occurs. Error is returned to JavaScript. Request is logged as blocked.

| **T-WE-13** | Network Blocking - WebSocket | 
. Create embedded app that uses WebSocket to connect to remote server.
. Launch app in Reader.
. Monitor network traffic.
| **AC:** WebSocket connections are blocked. No network traffic occurs. Connection fails. Request is logged as blocked.

| **T-WE-14** | Network Blocking - Image Loading | 
. Create embedded app with `<img src="http://example.com/image.png">`.
. Launch app in Reader.
. Monitor network traffic.
| **AC:** External image loading is blocked. Image fails to load. No network traffic occurs. Error is logged.

| **T-WE-15** | Network Blocking - Script Loading | 
. Create embedded app with `<script src="http://example.com/script.js">`.
. Launch app in Reader.
. Monitor network traffic.
| **AC:** External script loading is blocked. Script fails to load. No network traffic occurs. Error is logged.

| **T-WE-16** | Network Blocking - Service Workers | 
. Create embedded app that registers service worker.
. Launch app in Reader.
. Verify service worker is not registered.
. Check cache type setting.
| **AC:** Service workers are disabled. Registration fails. No service worker is created. HttpCacheType is set to NoCache.

|===

=== Performance and Standards Tests

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-WE-17** | Memory Usage per View | 
. Open single cartridge in Reader.
. Measure memory usage of WebEngine process.
. Open multiple cartridges (3-5).
. Measure total memory usage.
| **AC:** Single view uses ~50-100MB RAM. Multiple views scale linearly. Memory usage is reasonable. No memory leaks observed.

| **T-WE-18** | Hardware Acceleration | 
. Launch Reader on system with hardware acceleration support.
. Verify acceleration is enabled.
. Test rendering performance with complex content.
| **AC:** Hardware acceleration is enabled if available. Rendering performance is improved. No visual artifacts. Acceleration status can be verified.

| **T-WE-19** | Cache Performance | 
. Load cartridge with large resources (images, fonts).
. Reload cartridge.
. Measure load time for first and second load.
| **AC:** Second load is faster due to cache. Cache is working correctly. Cache size is within configured limits. Cache location is correct.

| **T-WE-20** | Multiple Embedded Apps | 
. Open cartridge with multiple embedded apps (3-5 apps).
. Launch all apps simultaneously.
. Monitor memory and performance.
| **AC:** All apps run without performance degradation. Memory usage is acceptable. No crashes or freezes. Each app is isolated.

| **T-WE-21** | HTML5 Semantic Elements | 
. Create cartridge with HTML5 semantic elements (`<article>`, `<section>`, `<nav>`, etc.).
. Open in Reader.
. Verify rendering and structure.
| **AC:** Semantic elements render correctly. Elements are properly styled. Structure is maintained. No rendering errors.

| **T-WE-22** | HTML5 Canvas | 
. Create cartridge with HTML5 canvas element.
. Draw graphics on canvas (shapes, text, images).
. Verify rendering.
| **AC:** Canvas renders correctly. Graphics are drawn properly. Performance is acceptable. No visual artifacts.

| **T-WE-23** | CSS3 Flexbox | 
. Create cartridge with CSS3 flexbox layout.
. Open in Reader.
. Verify layout and responsiveness.
| **AC:** Flexbox layout renders correctly. Elements are positioned properly. Layout is responsive. No layout errors.

| **T-WE-24** | CSS3 Grid | 
. Create cartridge with CSS3 grid layout.
. Open in Reader.
. Verify grid layout.
| **AC:** Grid layout renders correctly. Elements are positioned properly. Layout matches specification. No layout errors.

| **T-WE-25** | CSS3 Animations | 
. Create cartridge with CSS3 animations (transitions, keyframes).
. Open in Reader.
. Verify animations play.
| **AC:** Animations play correctly. Performance is smooth (60fps). No visual artifacts. Animations can be paused/stopped.

| **T-WE-26** | ECMAScript 2022 Features | 
. Create embedded app using ES2022 features (top-level await, class fields, etc.).
. Launch app in Reader.
. Verify execution.
| **AC:** ES2022 features work correctly. JavaScript executes without errors. Features are supported. No compatibility issues.

|===

== Test Cases: SQLite Configuration Validation

=== SQLite Configuration and Optimization

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SQL-01** | FR-SQL-6.1 (Minimum Version) | 
. Launch Reader application.
. Check SQLite version in logs or About dialog.
. Verify version is 3.51 or higher.
| **AC:** SQLite version is detected and logged. Version is 3.51 or higher. Error is displayed if version is insufficient.

| **T-SQL-02** | FR-SQL-6.2 (Version Detection) | 
. Launch Reader application.
. Check application logs for SQLite version information.
| **AC:** SQLite version is logged at application startup. Version information is available in logs. Version format is correct (e.g., "3.51.0").

| **T-SQL-03** | FR-SQL-6.3 (WAL Mode - Local Database) | 
. Launch Reader application (first run, creates new database).
. Check journal mode of local database using PRAGMA journal_mode.
. Verify WAL mode is enabled.
. Check for WAL file existence.
| **AC:** Local database is created with WAL mode enabled. Journal mode is "wal". WAL file (-wal) is created alongside database. Database functions correctly.

| **T-SQL-04** | FR-SQL-6.3 (WAL Mode - Existing Database) | 
. Create local database not in WAL mode (or use existing non-WAL database).
. Launch Reader application.
. Verify database is converted to WAL mode.
| **AC:** Existing database is automatically converted to WAL mode. Conversion is logged. Database functions correctly after conversion. WAL file is created.

| **T-SQL-05** | FR-SQL-6.4 (WAL Mode - Cartridge Files) | 
. Create new cartridge in Creator Tool.
. Check journal mode of cartridge file using PRAGMA journal_mode.
. Verify WAL mode is enabled.
| **AC:** Cartridge file is created with WAL mode enabled. Journal mode is "wal". WAL file is created alongside cartridge. Cartridge functions correctly.

| **T-SQL-06** | FR-SQL-6.5 (WAL Checkpoint Configuration) | 
. Perform multiple write operations on local database (100+ operations).
. Monitor WAL file size.
. Verify checkpoint occurs when threshold is reached (10MB or 1000 pages).
| **AC:** WAL checkpoint occurs when WAL file exceeds 10MB or 1000 pages written. Checkpoint truncates WAL file. Checkpoint is logged. WAL file size is managed.

| **T-SQL-07** | FR-SQL-6.6 (WAL Mode Detection) | 
. Create database file not in WAL mode (or use existing non-WAL cartridge).
. Open database in Reader (read-only).
. Verify detection and logging.
| **AC:** WAL mode is detected. Warning is logged if database is not in WAL mode. Database can still be read (if read-only). Detection works correctly.

| **T-SQL-08** | FR-SQL-6.7 (Page Size Configuration) | 
. Create new local database.
. Check page size of database using PRAGMA page_size.
. Verify page size is 4096 bytes.
| **AC:** Database is created with page size 4096 bytes. Page size is correctly set. Page size matches specification. Page size is verified.

| **T-SQL-09** | FR-SQL-6.8 (Cache Size Configuration) | 
. Open local database.
. Check cache size setting using PRAGMA cache_size.
. Open cartridge file.
. Check cache size setting.
| **AC:** Local database cache size is 2000 pages (8MB with 4KB pages). Cartridge cache size is 1000 pages (4MB with 4KB pages). Cache sizes are correctly configured. Cache is working.

| **T-SQL-10** | FR-SQL-6.9 (Synchronous Configuration) | 
. Open database in Reader.
. Check synchronous mode setting using PRAGMA synchronous.
. Verify synchronous mode is NORMAL (1).
| **AC:** Synchronous mode is set to NORMAL (1). Setting is correctly configured. Mode is appropriate for WAL mode. Configuration is verified.

| **T-SQL-11** | FR-SQL-6.10 (Journal Mode Configuration) | 
. Create new database.
. Check journal mode using PRAGMA journal_mode.
. Verify journal mode is WAL.
| **AC:** Journal mode is set to WAL. Mode is correctly configured. WAL mode is enabled. Configuration is verified.

| **T-SQL-12** | FR-SQL-6.11 (Foreign Key Constraints) | 
. Open database.
. Enable foreign key constraints using PRAGMA foreign_keys=ON.
. Attempt to insert record violating foreign key constraint.
. Verify constraint is enforced.
| **AC:** Foreign key constraints are enabled. Constraint violations are rejected. Error is returned (SQLITE_CONSTRAINT_FOREIGNKEY). Data integrity is maintained.

| **T-SQL-13** | FR-SQL-6.12 (Query Optimizer) | 
. Perform bulk import operation (import 10+ cartridges).
. Run ANALYZE command.
. Execute query that benefits from statistics.
. Measure query performance before and after ANALYZE.
| **AC:** ANALYZE updates query optimizer statistics. Query performance is improved after ANALYZE. Statistics are used by optimizer. Performance improvement is measurable.

| **T-SQL-14** | FR-SQL-6.13 (Index Optimization) | 
. Verify indexes exist on frequently queried columns (cartridge_guid, title, etc.).
. Execute queries using indexed columns.
. Use EXPLAIN QUERY PLAN to verify index usage.
. Measure query performance.
| **AC:** All required indexes exist. Queries use indexes (verified with EXPLAIN QUERY PLAN). Query performance is optimal. Indexes are effective.

| **T-SQL-15** | FR-SQL-6.14 (Vacuum and Optimization) | 
. Perform operations that fragment database (inserts, deletes, updates).
. Check database file size before VACUUM.
. Run VACUUM operation.
. Check database file size after VACUUM.
. Verify ANALYZE is run after VACUUM.
| **AC:** VACUUM operation completes successfully. Database file size is reduced. Database integrity is maintained. ANALYZE is run after VACUUM. Statistics are updated.

|===

=== Connection and Transaction Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SQL-16** | FR-SQL-6.15 (Connection Pooling) | 
. Launch Reader application.
. Open multiple cartridges simultaneously (3-5 cartridges).
. Verify connection management.
. Check that each cartridge has separate connection.
| **AC:** Local database uses single connection (Singleton). Each cartridge has separate connection (Per-Instance). Connections are managed correctly. No connection leaks.

| **T-SQL-17** | FR-SQL-6.16 (Connection Timeout) | 
. Lock database file externally (simulate locked database using file lock).
. Attempt to open database in Reader.
. Monitor timeout behavior.
| **AC:** Connection timeout occurs after 30 seconds. Retry logic with exponential backoff is used. Maximum 3 retry attempts. Error is displayed after timeout.

| **T-SQL-18** | FR-SQL-6.17 (Busy Handler) | 
. Open database in one Reader instance.
. Attempt to write to same database from another instance (or external tool).
. Verify busy handler behavior.
| **AC:** Busy handler waits up to 5 seconds. Exponential backoff is used. SQLITE_BUSY error is returned if lock persists. Error is handled gracefully. No application crash.

| **T-SQL-19** | FR-SQL-6.18 (Transaction Usage) | 
. Perform form data save operation.
. Verify transaction is used (check logs or use database monitoring).
. Simulate error during save (e.g., disk full).
. Verify rollback occurs.
| **AC:** Transaction is used for form data save. All operations are atomic. Rollback occurs on error. Data integrity is maintained. No partial updates.

| **T-SQL-20** | FR-SQL-6.19 (Transaction Isolation) | 
. Open same cartridge in two Reader instances (if possible, or simulate).
. Perform writes from both instances.
. Verify isolation behavior.
. Check for data corruption.
| **AC:** Transactions are properly isolated. WAL mode allows concurrent reads. Writes are serialized correctly. No data corruption occurs. Isolation is maintained.

| **T-SQL-21** | FR-SQL-6.20 (Savepoint Support) | 
. Perform complex operation using savepoints (e.g., form migration).
. Simulate error at intermediate step.
. Verify rollback to savepoint.
. Verify partial operations can be rolled back.
| **AC:** Savepoints are created correctly. Rollback to savepoint works. Partial operations can be rolled back. Transaction integrity is maintained. Savepoint functionality works.

|===

=== Error Handling and Recovery Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SQL-22** | FR-SQL-6.21 (Integrity Checks - Quick) | 
. Open cartridge in Reader.
. Perform quick integrity check using PRAGMA quick_check.
. Verify check completes.
. Check logs for results.
| **AC:** Quick integrity check is performed on cartridge open. Check completes quickly (< 1 second for typical cartridge). Results are logged. "ok" result indicates integrity.

| **T-SQL-23** | FR-SQL-6.21 (Integrity Checks - Full) | 
. Suspect database corruption (or manually corrupt database).
. Perform full integrity check using PRAGMA integrity_check.
. Verify check completes.
. Check for error reporting.
| **AC:** Full integrity check is performed. Check is comprehensive. Results are logged. Errors are reported if corruption detected. Check identifies specific issues.

| **T-SQL-24** | FR-SQL-6.22 (Corruption Recovery) | 
. Corrupt database file (manually alter bytes in SQLite file).
. Attempt to open in Reader.
. Verify recovery attempt.
. Check recovered data.
| **AC:** Corruption is detected. Recovery is attempted using .dump/.read or similar method. Recovered data is logged. User is notified of recovery status. Maximum data is recovered.

| **T-SQL-25** | FR-SQL-6.23 (Backup and Restore) | 
. Perform schema migration operation (or simulate major operation).
. Verify backup is created before operation.
. Check backup file exists in backup directory.
. Simulate migration failure.
. Restore from backup.
| **AC:** Backup is created before major operations. Backup file is stored in backup directory. Backup can be restored. Database is restored to pre-operation state. Backup naming is correct.

|===

=== Performance and Stress Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SQL-26** | WAL Mode Performance | 
. Create database with WAL mode disabled (rollback journal).
. Perform mixed read/write operations (50 reads, 50 writes).
. Measure performance.
. Enable WAL mode.
. Perform same operations.
. Compare performance.
| **AC:** WAL mode provides better performance for mixed workloads. Concurrent reads don't block writes. Performance improvement is measurable (10-30% improvement typical). WAL mode is beneficial.

| **T-SQL-27** | Cache Size Performance | 
. Configure different cache sizes (500, 1000, 2000 pages).
. Execute same queries on each configuration.
. Measure query performance.
| **AC:** Larger cache sizes improve query performance. Optimal cache size is identified (2000 pages for local, 1000 for cartridges). Performance improvement is measurable. Cache is effective.

| **T-SQL-28** | Index Performance | 
. Execute queries on indexed columns (cartridge_guid, title).
. Execute queries on non-indexed columns.
. Compare performance.
. Use EXPLAIN QUERY PLAN to verify index usage.
| **AC:** Indexed queries are significantly faster (10-100x improvement). Index usage is verified with EXPLAIN QUERY PLAN. Performance difference is measurable. Indexes are effective.

| **T-SQL-29** | Transaction Performance | 
. Perform operations with transactions (form data save).
. Perform same operations without transactions (if possible).
. Compare performance and data integrity.
| **AC:** Transactions maintain data integrity. Performance impact is minimal (< 5% overhead). Atomicity is guaranteed. Transactions are efficient.

| **T-SQL-30** | Large Database Performance | 
. Create database with 1000+ cartridges in manifest.
. Perform queries on large dataset (search, filter).
. Measure query performance.
. Verify indexes are used.
| **AC:** Queries complete within reasonable time (< 500ms for manifest queries). Indexes are used effectively. Performance is acceptable. No performance degradation with large datasets.

| **T-SQL-31** | Concurrent Access | 
. Open same cartridge in multiple Reader instances (if possible).
. Perform simultaneous reads and writes.
. Verify data integrity.
. Check for lock contention.
| **AC:** Concurrent access works correctly with WAL mode. Reads don't block each other. Writes are serialized. No data corruption occurs. WAL mode enables concurrency.

| **T-SQL-32** | High Write Load | 
. Perform rapid write operations (100+ writes per second).
. Monitor WAL file growth.
. Verify checkpoint behavior.
. Check performance under load.
| **AC:** WAL file grows during high write load. Checkpoint occurs when threshold reached. WAL file size is managed. Performance remains acceptable. No performance degradation.

| **T-SQL-33** | Large Transaction | 
. Perform transaction with 1000+ operations (bulk insert).
. Verify transaction completes.
. Verify atomicity (rollback on error).
. Measure transaction performance.
| **AC:** Large transaction completes successfully. All operations are atomic. Rollback works if transaction fails. Performance is acceptable. Transaction handles large operations.

| **T-SQL-34** | Database Size Limits | 
. Create database approaching SQLite practical size limits.
. Perform operations on large database (queries, updates).
. Verify performance and functionality.
| **AC:** Database handles large sizes correctly. Performance degrades gracefully. Operations complete successfully. No errors occur. Database remains functional.

|===

== Test Cases: Platform-Specific Considerations Validation

=== Platform Support Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PLAT-01** | FR-PLAT-7.1 (Linux Distribution Support) | 
. Install application on Arch Linux 2025.09.01.
. Verify application launches and functions correctly.
. Repeat for Debian 13, Fedora 43, Ubuntu 24.04 LTS.
| **AC:** Application installs and runs correctly on all specified Linux distributions. All core functionality works. No distribution-specific errors.

| **T-PLAT-02** | FR-PLAT-7.2 (macOS Support) | 
. Install application on macOS 26.1.
. Verify application launches and functions correctly.
. Test on both ARM64 and X86_64 architectures.
| **AC:** Application installs and runs correctly on macOS 26.1. Works on both ARM64 and X86_64. All core functionality works.

| **T-PLAT-03** | FR-PLAT-7.3 (Windows Support) | 
. Install application on Windows 11.
. Verify application launches and functions correctly.
. Test on X86_64 architecture.
| **AC:** Application installs and runs correctly on Windows 11. All core functionality works. No Windows-specific errors.

| **T-PLAT-04** | FR-PLAT-7.4 (Architecture Support) | 
. Build application for ARM64 architecture.
. Build application for X86_64 architecture.
. Verify both builds function correctly.
| **AC:** Application builds successfully for both ARM64 and X86_64. Both builds function correctly. Architecture-specific optimizations work.

| **T-PLAT-05** | FR-PLAT-7.6 (Universal Binary - macOS) | 
. Build universal binary for macOS.
. Verify binary contains both ARM64 and X86_64 architectures (use `lipo -info`).
. Test on both ARM64 and X86_64 Macs.
| **AC:** Universal binary is created successfully. Binary contains both architectures (verified with `lipo -info`). Application runs correctly on both ARM64 and X86_64 Macs.

|===

=== UI Framework Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PLAT-06** | FR-PLAT-7.7 (Qt Fusion Widget Set) | 
. Launch application on Windows.
. Verify Fusion style is applied to all UI components.
. Launch on macOS and Linux.
. Compare UI appearance across platforms.
| **AC:** Fusion style is applied to all UI components. UI appearance is consistent across all platforms. No platform-specific style differences (except where necessary for platform integration).

| **T-PLAT-07** | FR-PLAT-7.8 (UI Consistency) | 
. Test all UI components on Windows, macOS, and Linux.
. Verify consistent behavior across platforms.
. Check for platform-specific adaptations (menu bar, system tray).
| **AC:** UI components behave consistently across platforms. Platform-specific adaptations are minimal and appropriate. Menu bar integration works on macOS. System tray works on Windows/Linux (if implemented).

|===

=== Security Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PLAT-08** | FR-PLAT-7.9 (Platform Security Standards) | 
. Test secure credential storage on Windows (Credential Manager).
. Test secure credential storage on macOS (Keychain).
. Test secure credential storage on Linux (libsecret).
| **AC:** Credentials are stored using platform-specific secure storage. Credentials are encrypted and protected. Credentials can be retrieved correctly.

| **T-PLAT-09** | FR-PLAT-7.10 (Secure Storage) | 
. Store application credentials using SecureStorage API.
. Verify credentials are stored in platform-specific secure storage.
. Retrieve credentials and verify correctness.
| **AC:** Credentials are stored in Windows Credential Manager (Windows), Keychain (macOS), or libsecret (Linux). Credentials are encrypted. Credentials can be retrieved correctly.

| **T-PLAT-10** | FR-PLAT-7.11 (Certificate Validation) | 
. Test HTTPS connection with valid certificate.
. Test HTTPS connection with invalid certificate.
. Verify certificate validation uses platform-specific stores.
| **AC:** Valid certificates are accepted. Invalid certificates are rejected. Certificate validation uses Windows Certificate Store (Windows), Keychain (macOS), or system CA bundle (Linux).

|===

=== Distribution and Packaging Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PLAT-11** | FR-PLAT-7.13 (Distribution Format) | 
. Create Windows installer (MSI or EXE).
. Create macOS application bundle (.app) or DMG.
. Create Linux packages (DEB, RPM, PKG).
. Verify installation works correctly.
| **AC:** Installers/packages are created successfully. Installation works correctly on each platform. Application is installed to correct locations.

| **T-PLAT-12** | FR-PLAT-7.14 (Universal Binary - macOS) | 
. Build universal binary for macOS.
. Create DMG or application bundle.
. Verify universal binary is included.
| **AC:** Universal binary is created and included in distribution. Binary contains both ARM64 and X86_64 architectures. Distribution is preferred format for macOS.

| **T-PLAT-13** | FR-PLAT-7.15 (Code Signing) | 
. Code sign application on Windows (if certificate available).
. Code sign and notarize application on macOS.
. GPG sign Linux packages (if key available).
. Verify signatures are valid.
| **AC:** Application is code-signed on Windows (if certificate available). Application is code-signed and notarized on macOS. Linux packages are GPG signed (if key available). Signatures are valid.

|===

=== File Association and URL Scheme Testing

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-PLAT-14** | FR-PLAT-7.23 (File Associations) | 
. Install application.
. Double-click .sqlite cartridge file.
. Verify application opens with cartridge loaded.
| **AC:** File association is registered correctly. Double-clicking .sqlite file opens application with cartridge loaded. File association works on all platforms.

| **T-PLAT-15** | FR-PLAT-7.24 (URL Scheme Handling) | 
. Register URL scheme handler.
. Open `smartbook://` URL from browser or command line.
. Verify application handles URL correctly.
| **AC:** URL scheme handler is registered correctly. Application handles `smartbook://` URLs correctly. URL scheme works on all platforms that support it.

|===

== Test Cases: Help System and User Manual Validation

=== Help System Access and Content

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-HELP-01** | FR-HELP-8.1 (Help Menu Access) | 
. Launch Reader application.
. Check Help menu in menu bar.
. Verify "User Manual" option exists.
. Press F1 key.
. Verify help system opens.
| **AC:** Help menu is accessible from menu bar. "User Manual" option is present. F1 key opens help system. Help system is accessible via multiple methods.

| **T-HELP-02** | FR-HELP-8.2 (Help System Format) | 
. Open help system via Help menu.
. Verify help content is displayed (HTML or native help viewer).
. Check help content location.
. Verify help is accessible offline.
| **AC:** Help system displays content correctly. Help content is stored in application directory. Help is accessible without network connection. Help format is appropriate for platform.

| **T-HELP-03** | FR-HELP-8.3 (Help Content Location) | 
. Check application installation directory.
. Verify help content exists in expected location.
. Verify help content is included in distribution package.
| **AC:** Help content is stored in `{install_dir}/help/` (Windows/Linux) or `{install_dir}/Resources/help/` (macOS). Help content is included in distribution. Help content is accessible.

| **T-HELP-04** | FR-HELP-8.4 (User Manual Scope) | 
. Open user manual.
. Verify all required sections are present:
  * Getting started guide
  * Reader features
  * Creator Tool features
  * Security model
  * Keyboard shortcuts
  * Troubleshooting
  * FAQ
| **AC:** All required sections are present in user manual. Content is comprehensive and covers all major features. Manual structure is logical and easy to navigate.

| **T-HELP-05** | FR-HELP-8.5 (User Manual Structure) | 
. Open user manual.
. Verify table of contents with navigation links.
. Check chapter/section organization.
. Verify index exists.
. Test cross-references.
. Test search functionality (if available).
| **AC:** Table of contents is present with working navigation links. Manual is organized logically. Index is available for quick lookup. Cross-references work correctly. Search functionality works (if implemented).

|===

=== PDF User Manual Distribution

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-HELP-06** | FR-HELP-8.7 (PDF Manual Inclusion) | 
. Install application on Windows.
. Check installation directory for PDF manual.
. Install on macOS.
. Check application bundle for PDF manual.
. Install on Linux.
. Check documentation directory for PDF manual.
| **AC:** PDF manual is included in Windows installer and installed to `{install_dir}/docs/SmartBook_User_Manual.pdf`. PDF manual is included in macOS app bundle or DMG. PDF manual is included in Linux package and installed to `/usr/share/doc/smartbook/` or accessible location.

| **T-HELP-07** | FR-HELP-8.8 (PDF Manual Access) | 
. Launch application.
. Open Help menu.
. Click "Open User Manual (PDF)".
. Verify PDF opens in system PDF viewer.
. Manually open PDF from installation directory.
. Verify PDF opens correctly.
| **AC:** PDF manual is accessible via Help menu. PDF opens in system's default PDF viewer. PDF is accessible from installation directory. PDF content is readable and properly formatted.

| **T-HELP-08** | FR-HELP-8.9 (PDF Manual Naming) | 
. Check PDF filename in installation directory.
. Verify filename is `SmartBook_User_Manual.pdf` or includes version.
. Check filename consistency across platforms.
| **AC:** PDF filename is consistent (`SmartBook_User_Manual.pdf` or versioned). Filename is documented. Filename is consistent across all platforms.

| **T-HELP-09** | FR-HELP-8.10 (PDF Manual Generation) | 
. Check PDF manual content.
. Compare with HTML help content.
. Verify formatting, images, tables, cross-references are preserved.
. Verify PDF is generated from same source.
| **AC:** PDF manual contains same content as HTML help. Formatting is preserved (images, tables, cross-references). PDF is generated from single source. PDF quality is acceptable.

|===

=== Help System Integration

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-HELP-10** | FR-HELP-8.11 (Context-Sensitive Help) | 
. Open Settings dialog.
. Click Help button (if present).
. Verify relevant help section opens.
. Check tooltips on UI elements.
. Enable "What's This?" mode (if available).
. Click on UI element with "What's This?".
| **AC:** Context-sensitive help is available in dialogs. Help buttons link to relevant sections. Tooltips provide brief help text. "What's This?" mode works (if implemented). Help is contextually relevant.

| **T-HELP-11** | FR-HELP-8.12 (Help Viewer) | 
. Open integrated help viewer (if implemented).
. Test navigation controls (back, forward, home).
. Test search functionality.
. Test printing help content.
. Close and reopen help viewer.
. Verify window state is restored.
| **AC:** Help viewer displays content correctly. Navigation controls work (back, forward, home). Search functionality works. Help content can be printed. Window state (size, position) is restored.

| **T-HELP-12** | FR-HELP-8.13 (Help Content Updates) | 
. Check help content version.
. Compare with application version.
. Verify version is displayed in help viewer or About dialog.
. Test help content update mechanism (if implemented).
| **AC:** Help content version is displayed. Version can be compared with application version. Help content can be updated independently. Update mechanism works (if implemented).

|===

=== Platform-Specific Help Integration

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-HELP-13** | FR-HELP-8.14 (macOS Help Book) | 
. Install application on macOS.
. Open Help menu.
. Verify Help menu integrates with macOS Help Viewer.
. Test Spotlight search for help content.
. Verify PDF manual is accessible.
| **AC:** Help menu integrates with macOS Help system. Help content is accessible via macOS Help Viewer. Spotlight search indexes help content. PDF manual is accessible via Help menu.

| **T-HELP-14** | FR-HELP-8.15 (Windows Help) | 
. Install application on Windows.
. Press F1 key.
. Verify HTML help opens.
. Check Help menu for PDF manual option.
. Verify PDF manual is in installation directory.
| **AC:** F1 key opens HTML help. Help menu provides access to PDF manual. PDF manual is accessible from installation directory. Windows Help integration works (if implemented).

| **T-HELP-15** | FR-HELP-8.16 (Linux Help) | 
. Install application on Linux.
. Press F1 key or open Help menu.
. Verify HTML help opens.
. Test desktop environment help integration (if applicable).
. Verify PDF manual is accessible.
| **AC:** F1 key or Help menu opens HTML help. Desktop environment help integration works (if applicable). PDF manual is accessible via Help menu. PDF manual is in standard documentation directory.

|===

== Test Cases: Custom Navigation Bar Validation

=== Navigation Structure and Display

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-01** | FR-NAV-9.1, FR-NAV-9.6 (Custom Navigation Bar Support) | 
. Open cartridge with custom navigation structure defined.
. Verify navigation bar is displayed in Reader View.
. Verify navigation bar is separate from application menu.
. Verify navigation bar is positioned above content area.
| **AC:** Custom navigation bar is displayed when defined in cartridge. Navigation bar is separate from application menu. Navigation bar is positioned correctly above content. Navigation bar is visible and functional.

| **T-NAV-02** | FR-NAV-9.2 (Navigation Bar Definition) | 
. Open cartridge with navigation structure.
. Verify navigation groups are displayed (Browse, Departments, Bibliographies).
. Verify menu items are displayed in each group.
. Verify navigation bar structure matches cartridge definition.
| **AC:** Navigation groups are displayed correctly. Menu items are present in each group. Navigation structure matches cartridge definition. Navigation bar is properly organized.

| **T-NAV-03** | FR-NAV-9.7 (Navigation Bar Visibility) | 
. Open cartridge without navigation structure.
. Verify navigation bar is not displayed.
. Open cartridge with navigation structure.
. Verify navigation bar is displayed.
. Test navigation bar toggle (if supported).
| **AC:** Navigation bar is hidden when not defined. Navigation bar is displayed when defined. Navigation bar toggle works (if supported). Visibility behavior is correct.

|===

=== Browse Navigation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-04** | FR-NAV-9.3 (Browse Navigation) | 
. Open cartridge with Browse navigation group.
. Click "Browse" dropdown menu.
. Verify "By Creator", "By Issue", "By Title" options are present.
. Select "By Creator" option.
. Verify content is filtered or navigated appropriately.
| **AC:** Browse navigation group is displayed. Browse options (By Creator, By Issue, By Title) are present. Browse navigation filters or navigates content correctly. Browse functionality works as expected.

| **T-NAV-05** | FR-NAV-9.3 (Browse by Creator) | 
. Open cartridge with Browse navigation.
. Select "By Creator" from Browse menu.
. Verify content is filtered by creator/author.
. Verify filtered results are displayed correctly.
| **AC:** Browse by Creator filters content correctly. Filtered results match creator criteria. Content display is appropriate for filtered view.

| **T-NAV-06** | FR-NAV-9.3 (Browse by Issue) | 
. Open cartridge with Browse navigation.
. Select "By Issue" from Browse menu.
. Verify content is filtered by issue/publication.
. Verify filtered results are displayed correctly.
| **AC:** Browse by Issue filters content correctly. Filtered results match issue criteria. Content display is appropriate for filtered view.

| **T-NAV-07** | FR-NAV-9.3 (Browse by Title) | 
. Open cartridge with Browse navigation.
. Select "By Title" from Browse menu.
. Verify content is filtered by title.
. Verify filtered results are displayed correctly.
| **AC:** Browse by Title filters content correctly. Filtered results match title criteria. Content display is appropriate for filtered view.

|===

=== Department Navigation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-08** | FR-NAV-9.4 (Department Navigation) | 
. Open cartridge with Departments navigation group.
. Click "Departments" dropdown menu.
. Verify department items are displayed (Department 1, Department 2, etc.).
. Select a department.
. Verify navigation to department content.
| **AC:** Departments navigation group is displayed. Department items are present in dropdown. Department navigation works correctly. Navigation targets department content appropriately.

| **T-NAV-09** | FR-NAV-9.4 (Department Hierarchical Structure) | 
. Open cartridge with hierarchical departments (sub-departments).
. Verify parent departments are displayed.
. Verify sub-departments are accessible (if supported).
. Test navigation to parent and sub-departments.
| **AC:** Hierarchical department structure is supported. Parent and sub-departments are accessible. Navigation to hierarchical departments works correctly.

|===

=== Bibliography Navigation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-10** | FR-NAV-9.5 (Bibliography Navigation) | 
. Open cartridge with Bibliographies navigation group.
. Click "Bibliographies" dropdown menu.
. Verify bibliography formats are displayed (APA Format, CMS Format, etc.).
. Select a bibliography format.
. Verify navigation to bibliography reference page.
| **AC:** Bibliographies navigation group is displayed. Bibliography format options are present. Bibliography navigation works correctly. Navigation targets bibliography reference pages.

| **T-NAV-11** | FR-NAV-9.5 (Bibliography Anchor Navigation) | 
. Open cartridge with bibliography navigation.
. Select "APA Format" (target: page_and_anchor).
. Verify page loads and scrolls to APA format section.
. Select "CMS Format" (target: page_and_anchor).
. Verify page loads and scrolls to CMS format section.
| **AC:** Bibliography anchor navigation works correctly. Page loads and scrolls to correct anchor. Multiple bibliography formats are accessible. Anchor navigation is precise.

|===

=== Navigation Target Resolution

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-12** | FR-NAV-9.8 (Page ID Navigation) | 
. Open cartridge with navigation item targeting page_id.
. Select navigation item with target_type: "page_id".
. Verify navigation to target page.
. Verify reading position is updated.
. Verify navigation history is updated.
| **AC:** Page ID navigation works correctly. Target page loads successfully. Reading position is updated. Navigation history is updated.

| **T-NAV-13** | FR-NAV-9.8 (Anchor Navigation) | 
. Open cartridge with navigation item targeting anchor_id.
. Select navigation item with target_type: "anchor_id".
. Verify page scrolls to anchor (or loads page if anchor on different page).
. Verify reading position includes anchor_id.
| **AC:** Anchor navigation works correctly. Page scrolls to anchor or loads appropriate page. Reading position includes anchor information.

| **T-NAV-14** | FR-NAV-9.8 (Page and Anchor Navigation) | 
. Open cartridge with navigation item targeting page_and_anchor.
. Select navigation item with target_type: "page_and_anchor".
. Verify target page loads.
. Verify page scrolls to target anchor.
. Verify reading position includes both page_id and anchor_id.
| **AC:** Page and anchor navigation works correctly. Target page loads. Page scrolls to target anchor. Reading position includes both page and anchor information.

| **T-NAV-15** | FR-NAV-9.8 (Custom Handler Navigation) | 
. Open cartridge with navigation item using custom_handler.
. Select navigation item with target_type: "custom_handler".
. Verify custom handler executes (e.g., Browse by Creator).
. Verify handler produces expected results (filtered content, index, etc.).
| **AC:** Custom handler navigation works correctly. Custom handler executes successfully. Handler produces expected navigation results. Custom navigation functionality works as designed.

|===

=== Navigation Bar Styling and Accessibility

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-16** | FR-NAV-9.6 (Navigation Bar Styling) | 
. Open cartridge with custom navigation bar.
. Verify navigation bar uses cartridge CSS styling.
. Verify navigation bar respects content themes.
. Verify navigation bar is responsive to window resizing.
| **AC:** Navigation bar styling matches cartridge CSS. Navigation bar respects content themes. Navigation bar is responsive. Styling is consistent and appropriate.

| **T-NAV-17** | FR-NAV-9.6 (Keyboard Navigation) | 
. Open cartridge with custom navigation bar.
. Use Tab key to navigate between navigation groups.
. Use Arrow keys to navigate within dropdown menus.
. Use Enter/Space to activate menu items.
. Use Escape to close dropdown menus.
| **AC:** Keyboard navigation works correctly. Tab navigation moves between groups. Arrow keys navigate within menus. Enter/Space activates items. Escape closes menus.

|===

=== Creator Tool Navigation Support

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-NAV-18** | FR-NAV-9.10 (Define Navigation Structure) | 
. Open Creator Tool.
. Create new navigation group (e.g., "Browse").
. Add menu items to navigation group.
. Link menu items to pages or custom handlers.
. Preview navigation bar appearance.
| **AC:** Creator Tool allows defining navigation structure. Navigation groups can be created. Menu items can be added. Menu items can be linked to targets. Preview functionality works.

| **T-NAV-19** | FR-NAV-9.10 (Export Navigation Structure) | 
. In Creator Tool, define complete navigation structure.
. Export cartridge with navigation structure.
. Open exported cartridge in Reader.
. Verify navigation structure is preserved and functional.
| **AC:** Navigation structure is exported with cartridge. Navigation structure is preserved in exported cartridge. Navigation structure is functional in Reader. Export process includes navigation data.

|===

== Test Cases: Series and Edition Grouping Validation

=== Series and Edition Metadata

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SERIES-01** | FR-SERIES-10.1 (Series Name Metadata) | 
. Create cartridge with Creator Tool.
. Set series_name in metadata (e.g., "Lensman Series").
. Export cartridge.
. Import cartridge into Reader library.
. Verify series_name is stored in Metadata table.
| **AC:** Series name metadata is stored correctly. Series name is preserved in exported cartridge. Series name is readable from cartridge metadata.

| **T-SERIES-02** | FR-SERIES-10.2 (Edition Name Metadata) | 
. Create cartridge with Creator Tool.
. Set edition_name in metadata (e.g., "Classic Traveller").
. Export cartridge.
. Import cartridge into Reader library.
. Verify edition_name is stored in Metadata table.
| **AC:** Edition name metadata is stored correctly. Edition name is preserved in exported cartridge. Edition name is readable from cartridge metadata.

| **T-SERIES-03** | FR-SERIES-10.3 (Series Order Metadata) | 
. Create multiple cartridges in same series.
. Set series_order for each cartridge (1, 2, 3, etc.).
. Export and import cartridges.
. Verify series_order is stored and preserved.
| **AC:** Series order metadata is stored correctly. Series order is preserved in exported cartridge. Series order is readable from cartridge metadata.

| **T-SERIES-04** | FR-SERIES-10.4 (Creator Tool Series Support) | 
. Open Creator Tool.
. Create or edit cartridge metadata.
. Verify UI allows setting series_name, edition_name, and series_order.
. Set values and save.
. Verify values are stored correctly.
| **AC:** Creator Tool provides UI for series/edition metadata. All three fields (series_name, edition_name, series_order) are editable. Values are saved and displayed correctly.

|===

=== Auto-Grouping by Series and Edition

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SERIES-05** | FR-SERIES-10.5 (Auto-Grouping by Series) | 
. Import multiple cartridges with same series_name (e.g., "Lensman Series").
. Open Library Manager.
. Select "Browse by Series" view or filter.
. Verify series appears in list.
. Select series.
. Verify all cartridges in series are displayed.
| **AC:** Series auto-grouping works correctly. Series appears in browse view. All cartridges with matching series_name are grouped together. Series grouping is automatic (no manual setup required).

| **T-SERIES-06** | FR-SERIES-10.6 (Auto-Grouping by Edition) | 
. Import multiple cartridges with same edition_name (e.g., "Classic Traveller").
. Open Library Manager.
. Select "Browse by Edition" view or filter.
. Verify edition appears in list.
. Select edition.
. Verify all cartridges in edition are displayed.
| **AC:** Edition auto-grouping works correctly. Edition appears in browse view. All cartridges with matching edition_name are grouped together. Edition grouping is automatic (no manual setup required).

| **T-SERIES-07** | FR-SERIES-10.7 (Series Display Ordering) | 
. Import cartridges with series_name and series_order (1, 2, 3).
. Browse by series.
. Verify cartridges are displayed in order specified by series_order.
. Import cartridge with series_name but no series_order.
. Verify cartridge appears at end (or alphabetically).
| **AC:** Series ordering uses series_order when available. Cartridges with series_order are displayed in correct order. Cartridges without series_order are ordered alphabetically. Ordering is consistent and correct.

|===

=== Custom Collections

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SERIES-08** | FR-SERIES-10.8 (Custom Collections) | 
. Open Library Manager.
. Create new custom collection (e.g., "My RPG Collection").
. Verify collection is created.
. Add multiple cartridges to collection.
. Verify cartridges appear in collection.
| **AC:** Custom collections can be created. Collection name is stored correctly. Cartridges can be added to collection. Collection displays all members correctly.

| **T-SERIES-09** | FR-SERIES-10.9 (Collection Management) | 
. Create custom collection.
. Add cartridges to collection.
. Remove cartridge from collection.
. Rename collection.
. Delete collection.
. Verify all operations work correctly.
| **AC:** All collection management operations work correctly. Add/remove cartridges works. Rename collection works. Delete collection works. Operations persist across sessions.

| **T-SERIES-10** | FR-SERIES-10.9 (View Collection Members) | 
. Create custom collection with multiple cartridges.
. View collection.
. Verify all cartridges in collection are displayed.
. Verify cartridges can be opened from collection view.
| **AC:** Collection view displays all members correctly. Cartridges are accessible from collection view. Collection view is functional and user-friendly.

|===

=== Grouping Display and Navigation

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SERIES-11** | FR-SERIES-10.10 (Grouping Display) | 
. Import cartridges with various series and editions.
. Create custom collections.
. Test "Browse by Series" view.
. Test "Browse by Edition" view.
. Test "Custom Collections" view.
. Verify all views display correctly.
| **AC:** All grouping views are accessible. Series view displays all series correctly. Edition view displays all editions correctly. Custom collections view displays all collections correctly. Views are functional and intuitive.

| **T-SERIES-12** | FR-SERIES-10.10 (Search by Series/Edition) | 
. Import cartridges with series and edition metadata.
. Use search/filter to find cartridges by series name.
. Use search/filter to find cartridges by edition name.
. Verify search results are correct.
| **AC:** Search by series name works correctly. Search by edition name works correctly. Search results are accurate. Search is responsive and user-friendly.

| **T-SERIES-13** | FR-SERIES-10.11 (Grouping Persistence) | 
. Create custom collection and add cartridges.
. Close and reopen application.
. Verify custom collection persists.
. Verify collection members persist.
. Import new cartridge with series_name.
. Verify cartridge is automatically added to series group.
| **AC:** Custom collections persist across sessions. Collection members persist. Auto-grouping works on import. Grouping data is maintained correctly.

|===

=== Performance and Edge Cases

[cols="1, 2, a, 3", options="headers"]
|===
^.^| Test Case ID ^.^| Requirement Covered ^.^| Test Steps ^.^| Expected Result (Acceptance Criteria)

| **T-SERIES-14** | FR-SERIES-10.12 (Grouping Performance) | 
. Import 100+ cartridges with various series/editions.
. Open "Browse by Series" view.
. Measure load time.
. Verify load time is < 500ms.
. Test with custom collections.
. Verify performance is acceptable.
| **AC:** Grouping views load within performance requirements (< 500ms). Performance is acceptable with large libraries. Grouping operations are efficient. No performance degradation with many groups.

| **T-SERIES-15** | FR-SERIES-10.5, FR-SERIES-10.6 (Empty Groups) | 
. Import cartridge with series_name.
. Delete cartridge.
. Verify series group handling (removed or kept empty).
. Import cartridge with edition_name.
. Change edition_name in metadata.
. Verify grouping updates correctly.
| **AC:** Empty groups are handled appropriately. Grouping updates when metadata changes. Group membership is maintained correctly. Edge cases are handled gracefully.

|===

---